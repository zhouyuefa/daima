import{_ as e,f as a,g as l,ah as t,o as n,c as s,d as i,w as p,a as u,J as d,K as o,L as r,e as c,F as m,j as v,ai as y,aj as g,H as _,A as f,ad as b,ae as h,D as w,a3 as x,a4 as z,a5 as j}from"./index-BdR_P0jW.js";/* empty css                */import k from"./articleForm-B7X05KoH.js";import{E as C}from"./index-C5ggMqbd.js";const V={class:"mb20"},O=e(Object.assign({name:"admin/article/index"},{__name:"index",setup(e){const O=a([]),U=a(!1),S=l({}),B=a({title:"",content:"",type:""}),D=a([]),F=a([]),I=a({page:1,page_size:20,total:0}),P=async()=>{const e=await v("/admin/article/index/lists",{title:B.value.title,content:B.value.content,type:B.value.type,page:I.value.page,page_size:I.value.page_size});O.value=(null==e?void 0:e.lists.list)||[],I.value=(null==e?void 0:e.lists.page)||{},F.value=(null==e?void 0:e.type_list)||[],F.value=F.value.map((e=>({type:Number(e.type),type_name:e.type_name}))),D.value=[{type:"",type_name:"全部"}].concat([...F.value])},T=e=>{I.value.page_size=e,P()},A=e=>{I.value.page=e,P()},E=e=>{(e=>{for(const a of Object.keys(e))delete e[a]})(S),Object.assign(S,e),U.value=!0},H=async()=>{P()};return(async()=>{P()})(),(e,a)=>{const l=f,v=b,J=h,K=w,L=x,N=z,Z=j,q=C,G=t("hasPermi");return n(),s("div",null,[i(q,null,{header:p((()=>a[7]||(a[7]=[u("span",null,"文章管理",-1)]))),default:p((()=>[u("div",V,[i(l,{modelValue:B.value.title,"onUpdate:modelValue":a[0]||(a[0]=e=>B.value.title=e),style:{width:"280px"},clearable:"",placeholder:"标题"},null,8,["modelValue"]),i(J,{class:"ml30",modelValue:B.value.type,"onUpdate:modelValue":a[1]||(a[1]=e=>B.value.type=e),clearable:"",placeholder:"类型",style:{width:"280px"},"value-on-clear":""},{default:p((()=>[(n(!0),s(d,null,o(D.value,(e=>(n(),r(v,{key:e.type_name,label:e.type_name,value:e.type},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),i(K,{class:"ml30",type:"primary",onClick:a[2]||(a[2]=e=>(I.value.page=1,void P()))},{default:p((()=>a[8]||(a[8]=[c("查询")]))),_:1}),m((n(),r(K,{class:"ml30",type:"primary",onClick:a[3]||(a[3]=e=>E({id:0}))},{default:p((()=>a[9]||(a[9]=[c("新增")]))),_:1})),[[G,["admin/article/edit"]]])]),i(N,{data:O.value,"row-key":"id","default-expand-all":"",class:"mt5"},{default:p((()=>[i(L,{prop:"id",label:"ID",width:"80",sortable:""}),i(L,{prop:"title",label:"标题"}),i(L,{prop:"type_name",label:"类型"}),i(L,{prop:"created_at",label:"创建时间",width:"160"}),i(L,{label:"操作",align:"center",width:"220","min-width":"220"},{default:p((({row:e})=>[m((n(),r(K,{type:"primary",onClick:a=>E(e)},{default:p((()=>a[10]||(a[10]=[c("编辑")]))),_:2},1032,["onClick"])),[[G,["admin/article/edit"]]]),m((n(),r(K,{type:"danger",onClick:a=>(async({id:e})=>{y.confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await g("/admin/article/delete/"+e)&&(_({type:"success",message:"删除成功"}),H())})).catch((()=>{}))})(e)},{default:p((()=>a[11]||(a[11]=[c("删除")]))),_:2},1032,["onClick"])),[[G,["admin/article/delete"]]])])),_:1})])),_:1},8,["data"]),i(Z,{background:"",layout:"total, sizes, prev, pager, next, ->,jumper","current-page":I.value.page,"onUpdate:currentPage":a[4]||(a[4]=e=>I.value.page=e),"page-size":I.value.page_size,"onUpdate:pageSize":a[5]||(a[5]=e=>I.value.page_size=e),total:I.value.total,class:"ml10 mt10",onSizeChange:T,onCurrentChange:A},null,8,["current-page","page-size","total"])])),_:1}),i(k,{modelValue:U.value,"onUpdate:modelValue":a[6]||(a[6]=e=>U.value=e),data:S,typeOptions:F.value,onSubmit:H},null,8,["modelValue","data","typeOptions"])])}}}),[["__scopeId","data-v-43182735"]]);export{O as default};
