import{f as e,g as l,T as t,y as a,S as r,r as o,o as i,c as n,a as s,d as p,w as b,aw as c}from"./index-BdR_P0jW.js";/* empty css                */import{E as d}from"./index-C5CR2e01.js";const h={class:"boxElMain"},u={class:"box boxFlex"},g={__name:"index",setup(g){const m=e({getList:"/admin/user/integral_lists"});e(""),l({});const _=e([{type:"Select",label:"订单类型",prop:"order_type",options:[{label:"出行",value:"1"},{label:"商户",value:"2"}],placeholder:"请选择",width:"180px"},{type:"Input",label:"子订单号",prop:"zi_order_no",placeholder:"请输入",width:"180px"},{type:"Input",label:"分佣人ID",prop:"user_id",placeholder:"请输入",width:"180px"},{type:"Input",label:"分佣人手机号",prop:"mobile",placeholder:"请输入",width:"180px"}]),y=e({order_type:"",main_order_id:"",zi_order_no:"",user_id:"",mobile:""}),v=e([{label:"查 询",icon:"Search",handle:()=>W()},{label:"重置",handle:()=>D()},{label:"排序",popover:!0}]),w=e({page:1,page_size:20}),x=e([{label:"ID",prop:"id",align:"center",type:"string",sortable:!1,minWidth:"80",show:!0},{label:"订单类型",prop:"order_type_text",align:"center",type:"string",sortable:!1,minWidth:"80",show:!0},{label:"子订单号",prop:"order_goods_info",subProp:"order_no",align:"center",type:"object",sortable:!1,minWidth:"160",show:!0},{label:"订单金额（TN）",prop:"order_price",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"商户总返积分",prop:"merchant_total_point",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"分佣人ID",prop:"user_info",subProp:"id",align:"center",type:"object",sortable:!1,minWidth:"120",show:!0},{label:"分佣人手机号",prop:"user_info",subProp:"mobile",align:"center",type:"object",sortable:!1,minWidth:"120",show:!0},{label:"积分类型",prop:"integral_type_text",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"总分佣积分比例",prop:"integral_total_rate",align:"center",type:"percentage",sortable:!1,minWidth:"120",show:!0},{label:"类型积分比例",prop:"integral_type_rate",align:"center",type:"percentage",sortable:!1,minWidth:"120",show:!0},{label:"等级积分比例",prop:"level_rate",align:"center",type:"percentage",sortable:!1,minWidth:"120",show:!0},{label:"应得积分",prop:"integral_price",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"创建时间",prop:"created_time",align:"center",type:"timestamp",sortable:!1,minWidth:"160",show:!0},{label:"完成时间",prop:"complete_time",align:"center",type:"timestamp",sortable:!1,minWidth:"160",show:!0},{label:"发放时间",prop:"complete_time",align:"center",type:"timestamp",sortable:!1,minWidth:"160",show:!0},{label:"取消时间",prop:"complete_time",align:"center",type:"timestamp",sortable:!1,minWidth:"160",show:!0},{label:"状态",prop:"status_text",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0}]);t.on("getCheckData",(e=>{(e=>{const l=[];e.list.forEach((e=>{l.push(e.label)})),x.value.sort(((e,t)=>"操作"===e.label?1:l.indexOf(e.label)-l.indexOf(t.label))),x.value=x.value.map((l=>e.data.includes(l.label)||"操作"===l.label?{...l,show:!0}:{...l,show:!1}))})(e)}));const W=()=>{w.pageCurrent=1,C()},f=e([]),C=async()=>{const e=await a(m.value.getList,{...w.value,...y.value});if(e&&(f.value=[],w.value=(null==e?void 0:e.page)||{},f.value.splice(0),e.list.length>0))for(let l=0;l<e.list.length;l++){let t=e.list[l];f.value.push(t)}};r((()=>{C()}));const D=()=>{(e=>{for(const l of Object.keys(e))delete e[l]})(y.value),w.value.page=1,w.value.page_size=20,C()};return(e,l)=>{const t=c,a=o("cusTable"),r=d;return i(),n("div",null,[s("div",h,[s("div",u,[p(r,null,{default:b((()=>[p(t,{searchForm:_.value,searchData:y.value,searchHandle:v.value,tableCols:x.value,onHandleEnterSearch:W,onHandleReset:D},null,8,["searchForm","searchData","searchHandle","tableCols"]),p(a,{ref:"cusTable",height:"calc(100vh - 240px)","row-key":"id",isPagination:!0,isHandle:!0,tableCols:x.value,tableData:f.value,tablePage:w.value,onHandleCurrentChange:C},null,8,["tableCols","tableData","tablePage"])])),_:1})])])])}}};export{g as default};
