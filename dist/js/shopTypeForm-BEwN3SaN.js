import{_ as e,a6 as a,a7 as t,R as s,g as l,h as r,y as i,f as u,o as m,L as d,H as o}from"./index-BdR_P0jW.js";import{d as p}from"./dialogComp-DpPpTGA3.js";import"./index-DIDL6cCO.js";/* empty css                    */import"./index-TSZus3Mb.js";const n=e({__name:"shopTypeForm",props:a({data:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:a(["submit"],["update:modelValue"]),setup(e,{emit:a}){const n=t(e,"modelValue"),g=a,c=e,b=s((()=>(c.data.id?"编辑":"新增")+"商户类型")),f=s((()=>c.data.id)),y=l({});r(f,(async e=>{e??0?(Object.assign(y,c.data),h()):(e=>{for(const a of Object.keys(e))delete e[a]})(y)}));const _=l({parent_id:[{required:!0,message:"请选择",trigger:["blur","change"]}],key:[{required:!0,message:"请输入",trigger:["blur","change"]}],name:[{required:!0,message:"请输入",trigger:"blur"}],sort:[{required:!0,message:"请输入",trigger:"blur"}],file_id:[{required:!0,message:"请上传",trigger:"blur"}],link:[{required:!0,message:"请输入",trigger:"blur"}]}),v=l([]),h=async()=>{const{data:e}=await i("/admin/merchant/type/list",{status:"all",page:1,page_size:100,parent_id:0});if(!e)return;v.splice(0),e.map((e=>{v.push({value:e.id,label:e.name})}));let a=v.filter((e=>e.value!==c.data.id));v.splice(0),v.push(...a),v.unshift({value:0,label:"一级分类"})};h();const j=u([{label:"父级分类:",type:"select",msg:"parent_id",options:v},{label:"Key:",type:"input",msg:"key"},{label:"类型名称:",type:"input",msg:"name"},{label:"排序:",type:"input",msg:"sort"},{label:"图标:",type:"imgUpload",msg:"file_id",group:"merLogo",file_type:"image"},{label:"url:",type:"input",msg:"link"}]),q=async e=>{let a=e;await i("/admin/merchant/type/save_submit",a)&&(o.success("保存成功"),g("refreshList"),n.value=!1)},V=u({});return(e,a)=>(m(),d(p,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),formList:j.value,formData:y,rules:_,title:b.value,data:V.value,onSubmit:q},null,8,["modelValue","formList","formData","rules","title","data"]))}},[["__scopeId","data-v-eec7284b"]]);export{n as default};
