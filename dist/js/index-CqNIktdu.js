import{_ as a,f as e,g as l,a1 as t,ah as s,o as u,c as i,d as n,w as d,a as r,J as o,K as m,L as p,F as c,e as v,t as _,l as b,a2 as g,y as h,ai as w,H as f,A as y,ad as x,ae as k,am as V,D as z,a3 as j,af as C,a4 as U,a5 as D}from"./index-BdR_P0jW.js";/* empty css                */import P from"./usersForm-D2DIxMxJ.js";import{E as H}from"./index-C5ggMqbd.js";const L={class:"mb20 search-pane"},T={key:1,class:"image-load"},Y=a(Object.assign({name:"usermanager/users/index"},{__name:"index",setup(a){const Y=e([]),A=e(!1),S=l({}),B=e({mobile:"",status:"",admin_user_id:"",nickname:"",created_time:[]}),F=t({0:"未知",1:"男",2:"女"}),I=t({1:"正常",2:"注销",3:"黑名单"}),M=t({1:"安卓APP",2:"苹果APP",3:"H5",4:"公众号",5:"微信小程序"}),E=l([{value:0,label:"全部"},{value:1,label:"正常"},{value:2,label:"注销"},{value:3,label:"黑名单"}]),J=e({page:1,page_size:20,total:0}),K=async()=>{const a=await h("/admin/users/index/lists",{mobile:B.value.mobile,created_time:B.value.created_time,nickname:B.value.nickname,status:B.value.status,admin_user_id:B.value.admin_user_id,page:J.value.page,page_size:J.value.page_size});a&&(Y.value=(null==a?void 0:a.lists.list)||[],J.value=(null==a?void 0:a.lists.page)||{})},O=a=>{J.value.page_size=a,K()},Q=a=>{J.value.page=a,K()},Z=async({id:a},e)=>{w.confirm(`是否确认${e}？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await h("/admin/users/ban",{id:a})&&(f({type:"success",message:e+"成功"}),$())})).catch((()=>{}))},$=async()=>{K()};return(async()=>{K()})(),(a,e)=>{const l=y,t=x,h=k,w=V,f=z,q=j,G=C,N=U,R=D,W=H,X=s("hasPermi");return u(),i("div",null,[n(W,null,{header:d((()=>e[8]||(e[8]=[r("span",null,"用户列表",-1)]))),default:d((()=>[r("div",L,[n(l,{modelValue:B.value.nickname,"onUpdate:modelValue":e[0]||(e[0]=a=>B.value.nickname=a),style:{width:"240px"},placeholder:"昵称",clearable:""},null,8,["modelValue"]),n(l,{modelValue:B.value.mobile,"onUpdate:modelValue":e[1]||(e[1]=a=>B.value.mobile=a),style:{width:"240px"},placeholder:"用户手机",clearable:""},null,8,["modelValue"]),n(h,{modelValue:B.value.status,"onUpdate:modelValue":e[2]||(e[2]=a=>B.value.status=a),placeholder:"状态",style:{width:"200px"}},{default:d((()=>[(u(!0),i(o,null,m(E,(a=>(u(),p(t,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),n(w,{modelValue:B.value.created_time,"onUpdate:modelValue":e[3]||(e[3]=a=>B.value.created_time=a),type:"daterange","range-separator":"至","start-placeholder":"注册开始日期","end-placeholder":"注册结束日期","value-format":"YYYY-MM-DD HH:mm:ss",style:{flex:"0 0 360px"},"default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)]},null,8,["modelValue","default-time"]),c((u(),p(f,{type:"primary",onClick:e[4]||(e[4]=a=>(J.value.page=1,void K()))},{default:d((()=>e[9]||(e[9]=[v("查询")]))),_:1})),[[X,["admin/users/index/lists"]]])]),n(N,{data:Y.value,"row-key":"id","default-expand-all":"",class:"mt5"},{default:d((()=>[n(q,{prop:"id",label:"ID","min-width":"10",sortable:""}),n(q,{prop:"nickname",label:"昵称","min-width":"10"}),n(q,{prop:"country_code",label:"国际区号","min-width":"10"}),n(q,{prop:"mobile",label:"用户手机","min-width":"10"}),n(q,{prop:"avatar_url",label:"头像","min-width":"10"},{default:d((({row:a})=>[a.avatar_url?(u(),p(G,{key:0,style:{width:"100px",height:"100px"},src:a.avatar_url,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[a.avatar_url]},null,8,["src","preview-src-list"])):(u(),i("div",T))])),_:1}),n(q,{prop:"status",label:"状态","min-width":"10"},{default:d((({row:a})=>[r("span",null,_(b(I)[a.status]),1)])),_:1}),n(q,{prop:"source",label:"来源","min-width":"10"},{default:d((({row:a})=>[r("span",null,_(b(M)[a.source]),1)])),_:1}),n(q,{prop:"created_at",label:"注册时间","min-width":"10"}),n(q,{label:"操作",align:"center",width:"220","min-width":"220"},{default:d((({row:a})=>[c((u(),p(f,{onClick:e=>Z(a,"禁用")},{default:d((()=>e[10]||(e[10]=[v("禁用")]))),_:2},1032,["onClick"])),[[X,["admin/users/ban"]],[g,1==a.status]]),c((u(),p(f,{onClick:e=>Z(a,"启用"),disabled:2==a.status},{default:d((()=>e[11]||(e[11]=[v("启用")]))),_:2},1032,["onClick","disabled"])),[[X,["admin/users/ban"]],[g,3==a.status||2==a.status]])])),_:1})])),_:1},8,["data"]),n(R,{background:"",layout:"total, sizes, prev, pager, next, ->,jumper","current-page":J.value.page,"onUpdate:currentPage":e[5]||(e[5]=a=>J.value.page=a),"page-size":J.value.page_size,"onUpdate:pageSize":e[6]||(e[6]=a=>J.value.page_size=a),total:J.value.total,class:"ml10 mt10",onSizeChange:O,onCurrentChange:Q},null,8,["current-page","page-size","total"])])),_:1}),n(P,{modelValue:A.value,"onUpdate:modelValue":e[7]||(e[7]=a=>A.value=a),data:S,objType:{genderList:b(F),statusList:b(I),sourceList:b(M)},onSubmit:$},null,8,["modelValue","data","objType"])])}}}),[["__scopeId","data-v-bcf67219"]]);export{Y as default};
