import{_ as e,f as a,h as l,be as t,R as d,g as s,al as o,o as i,L as u,w as n,d as p,c as m,J as r,K as y,e as f,t as b,a as c,i as g,A as V,bQ as _,M as h,N as v,ad as k,ae as x,au as U,D as w,B as j,a8 as C,a9 as D,E as O,aa as S}from"./index-BdR_P0jW.js";import{P}from"./index-DIDL6cCO.js";/* empty css                    */import{E}from"./index-TSZus3Mb.js";const T={data:{type:Object,default:()=>({})},formList:{type:Array,default:()=>[]},rules:{type:Object,default:()=>({})},confirmValue:{type:Object,default:()=>({})},formData:{type:Object,default:()=>({})},dialogTitle:{type:String,default:"新增"},group:{type:String,default:""},file_type:{type:String,default:""},width:{type:String,default:""},modelValue:{type:Boolean,default:!1},labelPosition:{type:String,default:"right"}},L={class:"el-upload__tip text-red"},A={key:0},B={key:8,style:{display:"flex","align-items":"flex-start"}},G={key:0},I={style:{"margin-left":"20px"}},M={key:9,style:{display:"flex","align-items":"flex-start"}},N={class:"tip"},R=e({__name:"dialogComp",props:T,emits:["submit"],setup(e,{emit:T}){const R=a(!1),F=T,J=e;l((()=>J.modelValue),(async e=>{e&&!Q.value?(R.value=!0,t((()=>{z(q),0===J.formData.is_top&&(q.is_top=0,q.is_menu=0)}))):e?e&&(R.value=!0):R.value=!1}));const K=a(null),Q=d((()=>J.formData.id)),q=s({}),z=e=>{for(const a of Object.keys(e))delete e[a];K.value.clearValidate()};l(Q,(async e=>{e??0?Object.assign(q,J.formData):z(q)})),a(o+"/upload/merchant_file");const H=a(null),W=e=>{H.clearFiles();const a=e[0];H.handleStart(a)},X=()=>{z(q),R.value=!1,F("submit")};return(e,a)=>{const l=V,t=_,d=h,s=v,o=k,T=x,Q=U,z=w,Y=E,Z=P,$=j,ee=C,ae=D,le=O,te=S;return i(),u(te,{modelValue:R.value,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value=e),onClose:X,title:J.dialogTitle,width:J.width,top:"10vh",class:"form-dialog","close-on-click-modal":!1},{default:n((()=>[p(le,{ref_key:"formDataRef",ref:K,model:q,"label-width":"auto","label-position":J.labelPosition,rules:J.rules},{default:n((()=>[p(ae,null,{default:n((()=>[(i(!0),m(r,null,y(J.formList,((V,_)=>(i(),m(r,null,[!V.hide||V.hide(q)?(i(),u(ee,{span:V.span,key:_,class:"row-bg"},{default:n((()=>[p($,{label:V.label,prop:V.msg},{default:n((()=>["input"===V.type?(i(),u(l,{key:0,modelValue:q[V.msg],"onUpdate:modelValue":e=>q[V.msg]=e,disabled:!!V.disabled&&V.disabled()},null,8,["modelValue","onUpdate:modelValue","disabled"])):"inputNumber"===V.type?(i(),u(t,{key:1,modelValue:q[V.msg],"onUpdate:modelValue":e=>q[V.msg]=e,precision:V.precision,step:V.step,max:V.max,disabled:!!V.disabled&&V.disabled()},null,8,["modelValue","onUpdate:modelValue","precision","step","max","disabled"])):"textarea"==V.type?(i(),u(l,{key:2,modelValue:q[V.msg],"onUpdate:modelValue":e=>q[V.msg]=e,type:V.type,disabled:!!V.disabled&&V.disabled(),rows:"3"},null,8,["modelValue","onUpdate:modelValue","type","disabled"])):"radio"==V.type?(i(),u(s,{key:3,modelValue:q[V.msg],"onUpdate:modelValue":e=>q[V.msg]=e,disabled:!!V.disabled&&V.disabled()},{default:n((()=>[(i(!0),m(r,null,y(V.options,(e=>(i(),u(d,{value:e.value,key:e.value},{default:n((()=>[f(b(e.label),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])):"select"==V.type?(i(),u(T,{key:4,onChange:e=>((e,a,l)=>{l.forEach((l=>{l.value===e&&(null==a||a.forEach((e=>{q[e]=l[e]})))}))})(e,V.changeItems,V.options),modelValue:q[V.msg],"onUpdate:modelValue":e=>q[V.msg]=e,disabled:!!V.disabled&&V.disabled()},{default:n((()=>[(i(!0),m(r,null,y(V.options,(e=>(i(),u(o,{value:e.value,label:e.label,key:e.value},null,8,["value","label"])))),128))])),_:2},1032,["onChange","modelValue","onUpdate:modelValue","disabled"])):"cascader"==V.type?(i(),u(Q,{key:5,modelValue:q[V.msg],"onUpdate:modelValue":e=>q[V.msg]=e,disabled:!!V.disabled&&V.disabled(),"show-all-levels":!1,style:{width:"100%"},onChange:e=>null==V?void 0:V.change(e),options:V.options},null,8,["modelValue","onUpdate:modelValue","disabled","onChange","options"])):"upload"==V.type?(i(),u(Y,{key:6,ref_for:!0,ref_key:"upload",ref:H,class:"upload-con",action:e.actionUrl,limit:1,"on-exceed":W,"auto-upload":!0},{trigger:n((()=>[p(z,{type:"primary"},{default:n((()=>a[2]||(a[2]=[f("选择文件")]))),_:1})])),tip:n((()=>[c("div",L,[a[3]||(a[3]=f(" 最多选一个文件, 新文件将覆盖老文件 ")),q.path?(i(),m("p",A,b(q.path),1)):g("",!0)])])),_:1},8,["action"])):"imgUpload"==V.type?(i(),u(Z,{key:7,class:"avatar-uploader",modelValue:q[V.msg],"onUpdate:modelValue":e=>q[V.msg]=e,onGetPic:e=>((e,a)=>{(e=>{for(let a in e)return!1;return!0})(e)||(q[a]=e)})(e,V.msg),group:V.group,tip:"图片大小不超过2M，最多上传1张，比例大小1:1",file_type:"image",num:V.limit,width:"78px",height:"78px"},null,8,["modelValue","onUpdate:modelValue","onGetPic","group","num"])):"button"==V.type?(i(),m("div",B,[V.selected?(i(),m("span",G,b(J.confirmValue.goods_name),1)):g("",!0),c("span",I,[p(z,{link:"",type:V.linkType,disabled:!!V.disabled&&V.disabled(),onClick:V.handle},{default:n((()=>[f(b(V.buttonText),1)])),_:2},1032,["type","disabled","onClick"])])])):"tip"==V.type?(i(),m("div",M,[c("span",N,b(V.tip),1)])):g("",!0)])),_:2},1032,["label","prop"])])),_:2},1032,["span"])):g("",!0)],64)))),256))])),_:1}),p($,{class:"text-right mt20"},{default:n((()=>[p(z,{type:"primary",onClick:a[0]||(a[0]=e=>(async e=>{e&&e.validate((e=>{e&&F("submit",q)}))})(K.value))},{default:n((()=>a[4]||(a[4]=[f("提交")]))),_:1})])),_:1})])),_:1},8,["model","label-position","rules"])])),_:1},8,["modelValue","title","width"])}}},[["__scopeId","data-v-80f4ade5"]]);export{R as d};
