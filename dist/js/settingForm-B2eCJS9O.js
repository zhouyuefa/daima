import{a6 as e,a7 as a,R as l,f as t,g as s,h as o,j as u,o as d,L as n,w as i,d as r,c as m,J as p,K as c,e as _,t as g,ak as f,H as b,A as y,B as V,ad as v,ae as k,D as h,E as w,aa as j}from"./index-BdR_P0jW.js";const U={__name:"settingForm",props:e({data:{type:Object,default:()=>({})},rolenameOptions:{type:Array,default:[]}},{modelValue:{},modelModifiers:{}}),emits:e(["submit"],["update:modelValue"]),setup(e,{emit:U}){const x=a(e,"modelValue"),O=U,R=e,A=l((()=>(R.data.setting_id?"编辑":"新增")+"配置")),D=l((()=>R.data.setting_id)),z=t(null),B=s({}),C=t([{value:"string",label:"字符串"},{value:"number",label:"数字"},{value:"json",label:"json"}]),E=s({});o(D,(async e=>{const a=e??0,l=await u("/admin/setting/edit/"+a);if(!l)return;const{setting:t}=l||{};F(B),Object.assign(B,t)}));const F=e=>{for(const a of Object.keys(e))delete e[a]},H=async()=>{await f("/admin/setting/edit",B)&&(b.success((R.data.setting_id?"修改":"添加")+"成功"),O("submit"),x.value=!1)};return(a,l)=>{const t=y,s=V,o=v,u=k,f=h,b=w,U=j;return d(),n(U,{modelValue:x.value,"onUpdate:modelValue":l[6]||(l[6]=e=>x.value=e),title:A.value,width:"480",top:"20vh",class:"form-dialog","close-on-click-modal":!1},{default:i((()=>[r(b,{ref_key:"formDataRef",ref:z,model:B,"label-width":"auto",rules:E},{default:i((()=>[r(s,{label:"key",prop:"setting_key"},{default:i((()=>[r(t,{modelValue:B.setting_key,"onUpdate:modelValue":l[0]||(l[0]=e=>B.setting_key=e)},null,8,["modelValue"])])),_:1}),r(s,{label:"描述",prop:"setting_description"},{default:i((()=>[r(t,{style:{width:"100%"},modelValue:B.setting_description,"onUpdate:modelValue":l[1]||(l[1]=e=>B.setting_description=e),autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"请输入描述"},null,8,["modelValue"])])),_:1}),r(s,{label:"值",prop:"setting_value"},{default:i((()=>[r(t,{modelValue:B.setting_value,"onUpdate:modelValue":l[2]||(l[2]=e=>B.setting_value=e)},null,8,["modelValue"])])),_:1}),r(s,{label:"分组",prop:"setting_group"},{default:i((()=>[r(u,{modelValue:B.setting_group,"onUpdate:modelValue":l[3]||(l[3]=e=>B.setting_group=e),clearable:"",placeholder:"分组"},{default:i((()=>[(d(!0),m(p,null,c(e.rolenameOptions,(e=>(d(),n(o,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(s,{label:"类型",prop:"type"},{default:i((()=>[r(u,{modelValue:B.type,"onUpdate:modelValue":l[4]||(l[4]=e=>B.type=e),clearable:"",placeholder:"类型"},{default:i((()=>[(d(!0),m(p,null,c(C.value,(e=>(d(),n(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(s,{class:"text-right"},{default:i((()=>[r(f,{type:"primary",onClick:l[5]||(l[5]=e=>(async e=>{e&&e.validate((e=>{e&&H()}))})(z.value))},{default:i((()=>[_(" 立即"+g(R.data.setting_id?"修改":"添加"),1)])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};export{U as default};
