import{_ as e,f as a,j as l,g as t,T as o,S as n,r,o as i,c as s,a as p,d,w as h,aw as b}from"./index-BdR_P0jW.js";/* empty css                */import{E as c}from"./index-C5CR2e01.js";const u={class:"boxElMain"},_={class:"box boxFlex"},g=e({__name:"index",setup(e){const g=a({getList:"/admin/customer_bills/index/plate_point_bill_list"}),m=a([{type:"Input",label:"用户ID",prop:"user_id",placeholder:"请输入",width:"180px"},{type:"Input",label:"手机号",prop:"mobile",width:"180px",placeholder:"请输入"},{type:"Input",label:"关联订单号",prop:"sub_order_no",width:"180px",placeholder:"请输入"},{type:"Input",label:"商户ID",prop:"merchant_id",placeholder:"请输入",width:"180px"},{type:"Input",label:"商户名称",prop:"merchant_name",placeholder:"请输入",width:"180px"},{type:"DateRange",label:"日期",prop:"created_at",placeholder:"请输入",width:"280px"},{type:"Input",label:"流水类型",prop:"data_type",width:"180px",placeholder:"请输入"}]),v=a({name:"",order_no:"",created_at:[]}),w=a([{label:"查 询",icon:"Search",auth:"admin/customer_bills/index/plate_point_bill_list",handle:()=>H()},{label:"重置",auth:"admin/customer_bills/index/plate_point_bill_list",handle:()=>j()},{label:"排序",popover:!0}]),x=a([]),y=a([]),f=a({page:1,page_size:20}),D=a([{label:"序号",prop:"id",align:"center",type:"string",sortable:!1,minWidth:"80",show:!0},{label:"流水单号",prop:"bill_no",align:"center",type:"string",sortable:!1,minWidth:"160",show:!0},{label:"关联订单号",prop:"order_good_info",subProp:"order_no",align:"center",type:"object",sortable:!1,minWidth:"160",show:!0},{label:"商户ID",prop:"merchant_id",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"商户名称",prop:"order_good_info",subProp:"merchant_name",align:"center",type:"object",sortable:!1,minWidth:"120",show:!0},{label:"流水类型",prop:"type_text",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"期初余额",prop:"before_point",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"发生金额",prop:"total_point",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"期后余额",prop:"after_point",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"创建时间",prop:"created_at",align:"center",type:"string",sortable:!1,minWidth:"160",show:!0}]),I=a([]),W=a(!1),H=()=>{f.value.page=1,P()},j=()=>{(e=>{for(const a of Object.keys(e))delete e[a]})(v.value),f.value.page=1,f.value.page_size=20,P()},C=a({}),P=async()=>{const e=await l(g.value.getList,{...f.value,...v.value});if(e&&(y.value=[],f.value.total=e.page.total||0,y.value.splice(0),C.value=e.statistics,e.list.length>0))for(let a=0;a<e.list.length;a++){let l=e.list[a];y.value.push(l)}};return t({}),o.on("getCheckData",(e=>{(e=>{const a=[];e.list.forEach((e=>{a.push(e.label)})),D.value.sort(((e,l)=>"操作"===e.label?1:a.indexOf(e.label)-a.indexOf(l.label))),D.value=D.value.map((a=>e.data.includes(a.label)||"操作"===a.label?{...a,show:!0}:{...a,show:!1}))})(e)})),n((()=>{P()})),(e,a)=>{const l=b,t=r("cusTable"),o=c,n=r("DetailForm");return i(),s("div",u,[p("div",_,[d(o,null,{default:h((()=>[d(l,{searchForm:m.value,searchData:v.value,searchHandleRight:x.value,searchHandle:w.value,tableCols:D.value,onHandleEnterSearch:H,onHandleReset:j},null,8,["searchForm","searchData","searchHandleRight","searchHandle","tableCols"]),d(t,{ref:"cusTable",height:"calc(100vh - 320px)","row-key":"id",isPagination:!0,isHandle:!0,tableCols:D.value,tableData:y.value,tablePage:f.value,onHandleCurrentChange:P},null,8,["tableCols","tableData","tablePage"])])),_:1})]),d(n,{modelValue:W.value,"onUpdate:modelValue":a[0]||(a[0]=e=>W.value=e),data:I.value,onSubmit:e.refreshMenu},null,8,["modelValue","data","onSubmit"])])}}},[["__scopeId","data-v-29efc082"]]);export{g as default};
