import{_ as a,f as e,g as l,ah as s,o as t,c as u,d,w as p,a as o,F as i,L as n,e as r,J as m,K as v,i as c,j as g,A as _,D as h,c0 as b,N as y,a3 as f,a0 as w,a4 as z,a5 as x}from"./index-BdR_P0jW.js";/* empty css                */import{E as j}from"./index-C5ggMqbd.js";const k={class:"mb20"},V={class:"mb10"},C=a(Object.assign({name:"system/queue/index"},{__name:"index",setup(a){const C=e([]),q=e({class_name:"",method:""}),U=e(-1),D=l([{value:-1,label:"全部"},{value:0,label:"执行中"},{value:1,label:"成功"},{value:2,label:"失败"}]),I=e({page:1,page_size:20,total:0}),P=async()=>{const a=await g("/system/queue/index/lists",{status:U.value,method:q.value.method,page:I.value.page,page_size:I.value.page_size});a&&(C.value=(null==a?void 0:a.lists.list)||[],I.value=(null==a?void 0:a.lists.page)||{})},S=a=>{I.value.page_size=a,P()},A=a=>{I.value.page=a,P()},E=()=>{P()};return(async()=>{P()})(),(a,e)=>{const l=_,g=h,F=b,J=y,K=f,L=w,N=z,O=x,Z=j,B=s("hasPermi");return t(),u("div",null,[d(Z,null,{header:p((()=>e[5]||(e[5]=[o("span",null,"队列执行记录",-1)]))),default:p((()=>[o("div",k,[d(l,{modelValue:q.value.method,"onUpdate:modelValue":e[0]||(e[0]=a=>q.value.method=a),style:{width:"280px"},placeholder:"方法名称",clearable:""},null,8,["modelValue"]),i((t(),n(g,{class:"ml30",type:"primary",onClick:e[1]||(e[1]=a=>(I.value.page=1,void P()))},{default:p((()=>e[6]||(e[6]=[r("查询")]))),_:1})),[[B,["system/queue/search"]]])]),o("div",V,[d(J,{modelValue:U.value,"onUpdate:modelValue":e[2]||(e[2]=a=>U.value=a),onChange:E},{default:p((()=>[(t(!0),u(m,null,v(D,(a=>(t(),n(F,{label:a.label,value:a.value},null,8,["label","value"])))),256))])),_:1},8,["modelValue"])]),d(N,{data:C.value,"row-key":"id","default-expand-all":"",class:"mt5"},{default:p((()=>[d(K,{prop:"queue_id",label:"ID","min-width":"10",sortable:""}),d(K,{prop:"class_name",label:"类名","min-width":"10"}),d(K,{prop:"method",label:"方法","min-width":"10"}),d(K,{prop:"params",label:"参数","min-width":"10"}),d(K,{prop:"status",label:"状态","min-width":"10"},{default:p((({row:a})=>[0==a.status?(t(),n(L,{key:0,type:"primary"},{default:p((()=>e[7]||(e[7]=[r("执行中")]))),_:1})):1==a.status?(t(),n(L,{key:1,type:"success"},{default:p((()=>e[8]||(e[8]=[r("成功")]))),_:1})):2==a.status?(t(),n(L,{key:2,type:"danger"},{default:p((()=>e[9]||(e[9]=[r("失败")]))),_:1})):c("",!0)])),_:1}),d(K,{prop:"process_count",label:"执行次数","min-width":"10"}),d(K,{prop:"process_time",label:"执行时间","min-width":"10"}),d(K,{prop:"updated_at",label:"创建时间","min-width":"10"})])),_:1},8,["data"]),d(O,{background:"",layout:"total, sizes, prev, pager, next, ->,jumper","current-page":I.value.page,"onUpdate:currentPage":e[3]||(e[3]=a=>I.value.page=a),"page-size":I.value.page_size,"onUpdate:pageSize":e[4]||(e[4]=a=>I.value.page_size=a),total:I.value.total,class:"ml10 mt10",onSizeChange:S,onCurrentChange:A},null,8,["current-page","page-size","total"])])),_:1})])}}}),[["__scopeId","data-v-d6628de9"]]);export{C as default};
