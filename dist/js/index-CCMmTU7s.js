import{_ as e,f as a,g as l,a1 as t,o as d,c as r,d as o,w as u,a as i,J as n,K as s,L as p,e as m,t as _,l as c,y as v,A as b,am as y,ad as g,ae as h,D as w,a3 as f,a4 as V,a5 as x}from"./index-BdR_P0jW.js";/* empty css                */import k from"./company_billsForm-D2EUsAWV.js";import{E as z}from"./index-C5ggMqbd.js";const D={class:"mb20"},U={class:"mb20"},j=e(Object.assign({name:"usermanager/customer_bills/index"},{__name:"index",setup(e){const j=a([]),C=a(!1),I=l({});t({1:"约车",2:"旅游"}),t({1:"充值",2:"消费",3:"提现",4:"退款"});const N=a([{id:1,nickname:"充值"},{id:2,nickname:"消费"},{id:3,nickname:"提现"},{id:4,nickname:"退款"},{id:5,nickname:"赠送"}]),Y=t({balance:"余额",wechat:"微信",alipay:"支付宝",bank:"银行卡"}),S=a({page:1,page_size:20,total:0}),T=a({user_id:"",mobile:"",sub_order_no:"",data_type:"",created_at:[]}),H=async()=>{const e=await v("/admin/customer_bills/index/lists",{page:S.value.page,page_size:S.value.page_size,user_id:T.value.user_id,sub_order_no:T.value.sub_order_no,created_at:T.value.created_at,data_type:T.value.data_type,mobile:T.value.mobile});e&&(j.value=(null==e?void 0:e.lists.list)||[],S.value=(null==e?void 0:e.lists.page)||{})},M=e=>{S.value.page_size=e,H()},A=e=>{S.value.page=e,H()},E=async()=>{H()};return(async()=>{H()})(),(e,a)=>{const l=b,t=y,v=g,F=h,J=w,K=f,L=V,O=x,P=z;return d(),r("div",null,[o(P,null,{header:u((()=>a[9]||(a[9]=[i("span",null,"用户流水",-1)]))),default:u((()=>[i("div",D,[i("div",U,[o(l,{modelValue:T.value.user_id,"onUpdate:modelValue":a[0]||(a[0]=e=>T.value.user_id=e),style:{width:"280px"},placeholder:"用户ID",clearable:""},null,8,["modelValue"]),o(l,{modelValue:T.value.mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>T.value.mobile=e),class:"ml30",style:{width:"280px"},placeholder:"手机号",clearable:""},null,8,["modelValue"]),o(l,{modelValue:T.value.sub_order_no,"onUpdate:modelValue":a[2]||(a[2]=e=>T.value.sub_order_no=e),class:"ml30",style:{width:"280px"},placeholder:"子订单号",clearable:""},null,8,["modelValue"]),o(t,{class:"ml30",modelValue:T.value.created_at,"onUpdate:modelValue":a[3]||(a[3]=e=>T.value.created_at=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)]},null,8,["modelValue","default-time"]),o(F,{class:"ml30",modelValue:T.value.data_type,"onUpdate:modelValue":a[4]||(a[4]=e=>T.value.data_type=e),placeholder:"流水类型",style:{width:"280px"},clearable:"",filterable:""},{default:u((()=>[(d(!0),r(n,null,s(N.value,(e=>(d(),p(v,{key:e.id,label:e.nickname,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),o(J,{class:"ml30",type:"primary",onClick:a[5]||(a[5]=e=>(S.value.page=1,void H()))},{default:u((()=>a[10]||(a[10]=[m("查询")]))),_:1})])]),o(L,{data:j.value,"row-key":"id","default-expand-all":"",class:"mt5"},{default:u((()=>[o(K,{prop:"id",label:"ID","min-width":"10",sortable:""}),o(K,{prop:"title",label:"流水标题","min-width":"10"}),o(K,{prop:"bill_no",label:"流水单号","min-width":"10"}),o(K,{label:"子订单号","min-width":"10"},{default:u((({row:e})=>{var a;return[i("span",null,_((null==(a=e.order_car)?void 0:a.order_no)||"--"),1)]})),_:1}),o(K,{prop:"user.nickname",label:"用户名","min-width":"10"}),o(K,{prop:"user_id",label:"用户ID","min-width":"10"}),o(K,{prop:"user.mobile",label:"手机号","min-width":"10"}),o(K,{prop:"order_type",label:"订单类型","min-width":"10"},{default:u((({row:e})=>{var a;return[m(_(null==(a=e.order_car)?void 0:a.order_type_text),1)]})),_:1}),o(K,{prop:"data_type",label:"流水类型","min-width":"10"},{default:u((({row:e})=>[m(_(e.data_type_text),1)])),_:1}),o(K,{prop:"exchange_rate",label:"汇率","min-width":"10"}),o(K,{prop:"price",label:"变动金额(TN)","min-width":"10"}),o(K,{prop:"value_before",label:"之前余额(TN)","min-width":"10"}),o(K,{prop:"value_after",label:"之后余额(TN)","min-width":"10"}),o(K,{prop:"pay_type",label:"支付方式","min-width":"10"},{default:u((({row:e})=>[i("span",null,_(c(Y)[e.pay_type]?c(Y)[e.pay_type]:"--"),1)])),_:1}),o(K,{prop:"created_at",label:"创建时间","min-width":"10"})])),_:1},8,["data"]),o(O,{background:"",layout:"total, sizes, prev, pager, next, ->,jumper","current-page":S.value.page,"onUpdate:currentPage":a[6]||(a[6]=e=>S.value.page=e),"page-size":S.value.page_size,"onUpdate:pageSize":a[7]||(a[7]=e=>S.value.page_size=e),total:S.value.total,class:"ml10 mt10",onSizeChange:M,onCurrentChange:A},null,8,["current-page","page-size","total"])])),_:1}),o(k,{modelValue:C.value,"onUpdate:modelValue":a[8]||(a[8]=e=>C.value=e),data:I,onSubmit:E},null,8,["modelValue","data"])])}}}),[["__scopeId","data-v-313132e6"]]);export{j as default};
