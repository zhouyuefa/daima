import{_ as e,u as a,f as s,g as t,ah as i,o as n,c as l,d as c,w as d,a as o,F as r,L as m,e as u,t as p,P as _,i as y,j as f,T as b,ai as x,aj as w,H as g,ak as h,D as j,a3 as k,a0 as v,z as C,a4 as T}from"./index-BdR_P0jW.js";/* empty css                */import z from"./accessForm-BSjM9zy-.js";import{E as B}from"./index-C5ggMqbd.js";/* empty css                *//* empty css                       */import"./index-C81ng_c9.js";import"./index-DTPeqqvl.js";import"./index-D1LW7kyL.js";import"./index-SLBSEZ_O.js";const O=["onClick"],V=e(Object.assign({name:"admin/access/index"},{__name:"index",setup(e){const V=a(),I=s([]),U=s(!1),D=t({}),F={0:{tag:"success",label:"权限"},1:{tag:"primary",label:"菜单"}},P=async()=>{const e=await f("/admin/access/index/lists",{access_name:""});I.value=(null==e?void 0:e.lists)||[]},R=e=>{for(const a of Object.keys(e))delete e[a]},S=e=>{R(D),Object.assign(D,e),U.value=!0},E=async()=>{await V.getUserRole(),b.emit("menusChange"),P()};return(async()=>{P()})(),(e,a)=>{const s=j,t=k,f=v,b=C,V=T,P=B,H=i("hasPermi");return n(),l("div",null,[c(P,null,{header:d((()=>a[2]||(a[2]=[o("span",null,"菜单与权限",-1)]))),default:d((()=>[r((n(),m(s,{class:"mb8",type:"primary",onClick:a[0]||(a[0]=e=>S({access_id:0}))},{default:d((()=>a[3]||(a[3]=[u("添加")]))),_:1})),[[H,["admin/access/edit"]]]),c(V,{data:I.value,"row-key":"access_id",border:"","default-expand-all":"",class:"no-card-table mt5"},{default:d((()=>[c(t,{prop:"access_id",label:"ID",width:"210px",sortable:""}),c(t,{prop:"access_name",label:"名称","min-width":"10"}),c(t,{prop:"uri",label:"URI","min-width":"20"}),c(t,{prop:"sort",label:"排序",width:"150px",align:"center"},{default:d((({row:e})=>[o("span",{class:"text-primary cursor-pointer",onClick:a=>(e=>{x.prompt("请输入排序","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number",inputValue:e.sort}).then((async({value:a})=>{await h(`/admin/access/index/sort/${e.access_id}`,{sort:a.toString()})&&(g({type:"success",message:"操作成功"}),E())})).catch((()=>{}))})(e)},p(e.sort),9,O)])),_:1}),c(t,{prop:"is_menu",label:"类型",width:"90px",align:"center"},{default:d((({row:e})=>[c(f,{type:F[e.is_menu].tag},{default:d((()=>[u(p(F[e.is_menu].label),1)])),_:2},1032,["type"])])),_:1}),c(t,{prop:"menu_icon",label:"图标",width:"80px",align:"center"},{default:d((({row:e})=>[e.menu_icon?(n(),m(b,{key:0,size:"18",class:"mt5"},{default:d((()=>[(n(),m(_(e.menu_icon)))])),_:2},1024)):y("",!0)])),_:1}),c(t,{label:"操作",align:"center",width:"220","min-width":"220"},{default:d((({row:e})=>[1===e.is_menu?r((n(),m(s,{key:0,type:"success",size:"small",onClick:a=>(e=>{R(D),Object.assign(D,{parent_access_id:e.access_id}),U.value=!0})(e)},{default:d((()=>a[4]||(a[4]=[u("添加子级")]))),_:2},1032,["onClick"])),[[H,["admin/access/edit"]]]):y("",!0),r((n(),m(s,{type:"primary",size:"small",onClick:a=>S(e)},{default:d((()=>a[5]||(a[5]=[u("编辑")]))),_:2},1032,["onClick"])),[[H,["admin/access/edit"]]]),r((n(),m(s,{type:"danger",size:"small",onClick:a=>(async({access_id:e})=>{x.confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await w("/admin/access/delete/"+e)&&(g({type:"success",message:"删除成功"}),E())})).catch((()=>{}))})(e)},{default:d((()=>a[6]||(a[6]=[u("删除")]))),_:2},1032,["onClick"])),[[H,["admin/access/delete"]]])])),_:1})])),_:1},8,["data"])])),_:1}),c(z,{modelValue:U.value,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value=e),data:D,onSubmit:E},null,8,["modelValue","data"])])}}}),[["__scopeId","data-v-88238bd3"]]);export{V as default};
