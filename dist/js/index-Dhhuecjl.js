import{f as e,y as a,g as l,T as t,S as r,r as s,o,c as i,a as n,d as p,w as b,aw as h}from"./index-BdR_P0jW.js";/* empty css                */import{E as d}from"./index-C5CR2e01.js";const c={class:"boxElMain"},u={class:"box boxFlex"},g={__name:"index",setup(g){const m=e({getList:"/admin/customer_bills/index/merchant_lists"}),v=e([{value:1,label:"充值"},{value:2,label:"消费"},{value:3,label:"提现"},{value:4,label:"退款"},{value:5,label:"赠送"}]),_=e([{type:"Input",label:"用户ID",prop:"user_id",placeholder:"请输入用户ID",width:"180px"},{type:"Input",label:"手机号",prop:"mobile",placeholder:"请输入手机号",width:"180px"},{type:"Input",label:"子订单号",prop:"sub_order_no",width:"180px",placeholder:"请输入子订单号"},{type:"DateRange",label:"日期",prop:"created_at",placeholder:"请选择日期",width:"280px"},{type:"Select",label:"流水类型",options:v,prop:"data_type",placeholder:"请选择流水类型",width:"180px"}]),y=e({user_id:"",mobile:"",user_id:"",created_at:"",data_type:""}),w=e([{label:"查 询",icon:"Search",auth:"admin/customer_bills/index/merchant_lists",handle:()=>j()},{label:"重置",auth:"admin/customer_bills/index/merchant_lists",handle:()=>H()},{label:"排序",popover:!0}]),x=e([]),f=e([]),W=e({page:1,page_size:20}),D=e([{label:"序号",prop:"id",align:"center",type:"string",sortable:!1,minWidth:"80",show:!0},{label:"流水标题",prop:"title",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"流水单号",prop:"bill_no",align:"center",type:"string",sortable:!1,minWidth:"160",show:!0},{label:"子订单号",prop:"order_good",subProp:"order_no",align:"center",type:"object",sortable:!1,minWidth:"160",show:!0},{label:"用户ID",prop:"user",subProp:"id",align:"center",type:"object",sortable:!1,minWidth:"80",show:!0},{label:"用户名称",prop:"user",subProp:"nickname",align:"center",type:"object",sortable:!1,minWidth:"120",show:!0},{label:"手机号",prop:"user",subProp:"mobile",align:"center",type:"object",sortable:!1,minWidth:"120",show:!0},{label:"流水类型",prop:"data_type_text",align:"center",type:"string",sortable:!1,minWidth:"80",show:!0},{label:"汇率",prop:"exchange_rate",align:"center",type:"string",sortable:!1,minWidth:"80",show:!0},{label:"变动金额（TN）",prop:"price",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"之前余额（TN）",prop:"value_before",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"之后余额（TN）",prop:"value_after",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"支付方式",prop:"pay_type_text",align:"center",type:"string",sortable:!1,minWidth:"80",show:!0},{label:"创建时间",prop:"created_at",align:"center",type:"string",sortable:!1,minWidth:"150",show:!0}]),j=()=>{W.value.page=1,C()},H=()=>{(e=>{for(const a of Object.keys(e))delete e[a]})(y.value),W.value.page=1,W.value.page_size=20,C()},C=async()=>{const e=await a(m.value.getList,{...W.value,...y.value});if(e&&(f.value=[],W.value.total=e.page.total||0,f.value.splice(0),e.list.length>0))for(let a=0;a<e.list.length;a++){let l=e.list[a];f.value.push(l)}};return l({}),t.on("getCheckData",(e=>{(e=>{const a=[];e.list.forEach((e=>{a.push(e.label)})),D.value.sort(((e,l)=>"操作"===e.label?1:a.indexOf(e.label)-a.indexOf(l.label))),D.value=D.value.map((a=>e.data.includes(a.label)||"操作"===a.label?{...a,show:!0}:{...a,show:!1}))})(e)})),r((()=>{C()})),(e,a)=>{const l=h,t=s("cusTable"),r=d;return o(),i("div",c,[n("div",u,[p(r,null,{default:b((()=>[p(l,{searchForm:_.value,searchData:y.value,searchHandleRight:x.value,searchHandle:w.value,tableCols:D.value,onHandleEnterSearch:j,onHandleReset:H},null,8,["searchForm","searchData","searchHandleRight","searchHandle","tableCols"]),p(t,{ref:"cusTable",height:"calc(100vh - 240px)","row-key":"id",isPagination:!0,isHandle:!0,tableCols:D.value,tableData:f.value,tablePage:W.value,onHandleCurrentChange:C},null,8,["tableCols","tableData","tablePage"])])),_:1})])])}}};export{g as default};
