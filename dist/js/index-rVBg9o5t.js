import{_ as e,f as a,g as l,ah as t,o as s,c as i,d as n,w as d,a as p,J as u,K as o,L as r,e as m,F as c,t as v,j as y,ai as _,aj as g,H as f,A as b,ad as h,ae as w,D as x,a3 as k,af as j,a4 as z,a5 as C}from"./index-BdR_P0jW.js";/* empty css                */import V from"./adsForm-DnnH7QqH.js";import{E as U}from"./index-C5ggMqbd.js";/* empty css                    */import"./index-TSZus3Mb.js";const O={class:"mb20"},S={key:1,class:"image-load"},B=e(Object.assign({name:"admin/ads/index"},{__name:"index",setup(e){const B=a([]),D=a(!1),F=l({}),I=a({title:"",type:""}),P=a([]),T=a([]),A=a({page:1,page_size:20,total:0}),E=async()=>{const e=await y("/admin/ads/index/lists",{title:I.value.title,type:I.value.type,page:A.value.page,page_size:A.value.page_size});B.value=(null==e?void 0:e.lists.list)||[],A.value=(null==e?void 0:e.lists.page)||{},T.value=(null==e?void 0:e.type_list)||[],T.value=T.value.map((e=>({type:e.type,type_name:e.type_name}))),P.value=[{type:"",type_name:"全部"}].concat([...T.value])},H=e=>{A.value.page_size=e,E()},J=e=>{A.value.page=e,E()},K=e=>{(e=>{for(const a of Object.keys(e))delete e[a]})(F),Object.assign(F,e),D.value=!0},L=async()=>{E()};return(async()=>{E()})(),(e,a)=>{const l=b,y=h,T=w,Z=x,q=k,G=j,M=z,N=C,Q=U,R=t("hasPermi");return s(),i("div",null,[n(Q,null,{header:d((()=>a[7]||(a[7]=[p("span",null,"广告管理",-1)]))),default:d((()=>[p("div",O,[n(l,{modelValue:I.value.title,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value.title=e),clearable:"",style:{width:"280px"},placeholder:"名称"},null,8,["modelValue"]),n(T,{class:"ml30",modelValue:I.value.type,"onUpdate:modelValue":a[1]||(a[1]=e=>I.value.type=e),clearable:"",placeholder:"类型",style:{width:"280px"},"value-on-clear":""},{default:d((()=>[(s(!0),i(u,null,o(P.value,(e=>(s(),r(y,{key:e.type_name,label:e.type_name,value:e.type},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),n(Z,{class:"ml30",type:"primary",onClick:a[2]||(a[2]=e=>(A.value.page=1,void E()))},{default:d((()=>a[8]||(a[8]=[m("查询")]))),_:1}),c((s(),r(Z,{class:"ml30",type:"primary",onClick:a[3]||(a[3]=e=>K({id:0}))},{default:d((()=>a[9]||(a[9]=[m("新增")]))),_:1})),[[R,["admin/ads/edit"]]])]),n(M,{data:B.value,"row-key":"id","default-expand-all":"",class:"mt5"},{default:d((()=>[n(q,{prop:"id",label:"ID",width:"80",sortable:""}),n(q,{prop:"title",label:"标题"}),n(q,{prop:"type_name",label:"类型"}),n(q,{prop:"file_url",label:"图片"},{default:d((({row:e})=>[e.file_url?(s(),r(G,{key:0,style:{width:"100px",height:"100px"},src:e.file_url,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[e.file_url]},null,8,["src","preview-src-list"])):(s(),i("div",S))])),_:1}),n(q,{prop:"type_name",label:"有效期"},{default:d((({row:e})=>[p("div",null,v(e.valid_from)+" - "+v(e.valid_to),1)])),_:1}),n(q,{prop:"url",label:"链接"}),n(q,{label:"操作",align:"center",width:"220","min-width":"220"},{default:d((({row:e})=>[c((s(),r(Z,{type:"primary",onClick:a=>K(e)},{default:d((()=>a[10]||(a[10]=[m("编辑")]))),_:2},1032,["onClick"])),[[R,["admin/ads/edit"]]]),c((s(),r(Z,{type:"danger",onClick:a=>(async({id:e})=>{_.confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await g("/admin/ads/delete/"+e)&&(f({type:"success",message:"删除成功"}),L())})).catch((()=>{}))})(e)},{default:d((()=>a[11]||(a[11]=[m("删除")]))),_:2},1032,["onClick"])),[[R,["admin/ads/delete"]]])])),_:1})])),_:1},8,["data"]),n(N,{background:"",layout:"total, sizes, prev, pager, next, ->,jumper","current-page":A.value.page,"onUpdate:currentPage":a[4]||(a[4]=e=>A.value.page=e),"page-size":A.value.page_size,"onUpdate:pageSize":a[5]||(a[5]=e=>A.value.page_size=e),total:A.value.total,class:"ml10 mt10",onSizeChange:H,onCurrentChange:J},null,8,["current-page","page-size","total"])])),_:1}),n(V,{modelValue:D.value,"onUpdate:modelValue":a[6]||(a[6]=e=>D.value=e),data:F,onSubmit:L},null,8,["modelValue","data"])])}}}),[["__scopeId","data-v-552c632e"]]);export{B as default};
