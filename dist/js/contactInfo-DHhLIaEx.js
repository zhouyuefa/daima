import{_ as a,Q as e,v as s,R as t,f as r,S as l,h as o,o as u,c,d as i,w as n,l as d,cy as p,a as y,L as v,i as m,t as f,e as h,ag as _,fJ as q,I as k,b_ as g,D as I}from"./index-BdR_P0jW.js";/* empty css                *//* empty css                  *//* empty css                  *//* empty css                   */import{d as T}from"./theme2x-BNPuQkrE.js";import{d as x}from"./jiaqun2x-sZnD5yew.js";import{E as j,d as $}from"./index-C2nuVSeZ.js";import{E}from"./index-CHd10VUt.js";import{d as L,E as G}from"./index-C5CR2e01.js";import{E as C}from"./index-CFgL_LVg.js";const b={class:"app_container"},S={class:"contactInfo_main_card"},U={class:"contactInfo_box"},N={class:"avatar"},P={class:"name"},R={key:0},B={key:1},O={class:"func_box"},V={key:0,class:"single_func"},z={class:"add_black_list"},A={class:"del_friend"},w={class:"contaactInfo_btn"},D=a({__name:"contactInfo",setup(a){const D=e(),F=s(),{CHAT_TYPE:H}=_,J=t((()=>F.query.chatType===H.SINGLE?D.state.Contacts.friendList[F.query.id]??{}:F.query.chatType===H.GROUP?D.state.Contacts.groupList[F.query.id]??{}:void 0)),Q=r(!1),Y=r(!1),K=t((()=>Array.from(D.state.Contacts.friendBlackList).includes(F.query.id)));l((()=>{Q.value=K.value})),o((()=>F.query.id),(()=>{F.query.chatType===H.SINGLE&&(Q.value=K.value)}));const M=async()=>{Y.value=!0,Q.value&&F.query.id?(q.removeUserFromBlocklist({name:[F.query.id]}),Q.value=!1,Y.value=!1):(q.addUsersToBlocklist({name:[F.query.id]}),Q.value=!0,Y.value=!1),setTimeout((()=>{D.dispatch("fetchBlackList")}),500)},W=()=>{if(!F.query.id)return;const a=F.query.id;q.deleteContact(a),k.push("/chat/contacts")},X=()=>{k.push({path:"/chat/conversation/message",query:{id:F.query.id,chatType:F.query.chatType}})};return(a,e)=>{const s=j,t=E,r=L,l=C,o=g,_=$,q=I,k=G;return u(),c("div",b,[i(r,{class:"contactInfo_header"},{default:n((()=>[i(s,{style:{"margin-top":"12px"},icon:d(p),onClick:e[0]||(e[0]=e=>a.$router.back(-1))},null,8,["icon"]),i(t)])),_:1}),i(k,{class:"contactInfo_main"},{default:n((()=>[y("div",S,[y("div",U,[y("div",N,[a.$route.query.chatType===d(H).SINGLE?(u(),v(l,{key:0,class:"avatar_img",src:J.value.avatarurl?J.value.avatarurl:d(T)},null,8,["src"])):m("",!0),a.$route.query.chatType===d(H).GROUP?(u(),v(l,{key:1,class:"avatar_img",src:d(x)},null,8,["src"])):m("",!0)]),y("div",P,[a.$route.query.chatType===d(H).SINGLE?(u(),c("p",R,f(J.value.nickname?`${J.value.nickname}(${J.value.hxId})`:J.value.hxId),1)):m("",!0),a.$route.query.chatType===d(H).GROUP?(u(),c("p",B,f(J.value.groupname?`${J.value.groupname}(${J.value.groupid})`:J.value.groupid),1)):m("",!0)]),y("div",O,[a.$route.query.chatType===d(H).SINGLE?(u(),c("div",V,[y("div",z,[e[2]||(e[2]=y("p",null,"加入黑名单",-1)),i(o,{modelValue:Q.value,"onUpdate:modelValue":e[1]||(e[1]=a=>Q.value=a),loading:Y.value,"before-change":M},null,8,["modelValue","loading"])]),i(t),y("div",A,[i(_,{title:"确认删除此好友?",onConfirm:W},{reference:n((()=>e[3]||(e[3]=[y("span",null,"删除好友",-1)]))),_:1})])])):m("",!0)])]),y("div",w,[a.$route.query.chatType===d(H).SINGLE?(u(),v(q,{key:0,type:"primary",size:"large",onClick:X},{default:n((()=>e[4]||(e[4]=[h("发起会话 ")]))),_:1})):m("",!0),a.$route.query.chatType===d(H).GROUP?(u(),v(q,{key:1,type:"primary",size:"large",onClick:X},{default:n((()=>e[5]||(e[5]=[h("进入群聊 ")]))),_:1})):m("",!0)])])])),_:1})])}}},[["__scopeId","data-v-c8fe8279"]]);export{D as default};
