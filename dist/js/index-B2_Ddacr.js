import{_ as e,f as a,g as l,ah as s,o as t,c as n,d as i,w as r,a as d,J as u,K as o,L as m,e as p,F as c,j as _,ai as v,aj as g,H as h,A as y,ad as f,ae as b,D as w,a3 as j,a4 as x,a5 as z}from"./index-BdR_P0jW.js";/* empty css                */import k from"./userForm-BLucmx8f.js";import{E as C}from"./index-C5ggMqbd.js";/* empty css                *//* empty css                       */import"./index-DTPeqqvl.js";import"./index-D1LW7kyL.js";import"./index-SLBSEZ_O.js";const V={class:"mb20"},O=e(Object.assign({name:"admin/user/index"},{__name:"index",setup(e){const O=a([]),U=a(!1),B=l({}),S=a({username:"",role_id:"all"}),D=a([]),F=a([]),I=a({page:1,page_size:20,total:0}),P=async()=>{const e=await _("/admin/user/index/lists",{username:S.value.username,role_id:S.value.role_id,page:I.value.page,page_size:I.value.page_size});e&&(O.value=(null==e?void 0:e.lists.list)||[],D.value=(null==e?void 0:e.role_list)||[],F.value=[{role_id:"all",role_name:"全部"}].concat(D.value),I.value=(null==e?void 0:e.lists.page)||{})},T=e=>{I.value.page_size=e,P()},A=e=>{I.value.page=e,P()},E=e=>{(e=>{for(const a of Object.keys(e))delete e[a]})(B),Object.assign(B,e),U.value=!0},H=async()=>{P()};return(async()=>{P()})(),(e,a)=>{const l=y,_=f,J=b,K=w,L=j,Y=x,Z=z,q=C,G=s("hasPermi");return t(),n("div",null,[i(q,null,{header:r((()=>a[7]||(a[7]=[d("span",null,"管理员列表",-1)]))),default:r((()=>[d("div",V,[i(l,{modelValue:S.value.username,"onUpdate:modelValue":a[0]||(a[0]=e=>S.value.username=e),style:{width:"280px"},placeholder:"用户名"},null,8,["modelValue"]),i(J,{class:"ml30",modelValue:S.value.role_id,"onUpdate:modelValue":a[1]||(a[1]=e=>S.value.role_id=e),clearable:"",placeholder:"类型",style:{width:"280px"}},{default:r((()=>[(t(!0),n(u,null,o(F.value,(e=>(t(),m(_,{key:e.role_name,label:e.role_name,value:e.role_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),i(K,{class:"ml30",type:"primary",onClick:a[2]||(a[2]=e=>(I.value.page=1,void P()))},{default:r((()=>a[8]||(a[8]=[p("查询")]))),_:1}),c((t(),m(K,{class:"ml30",type:"primary",onClick:a[3]||(a[3]=e=>E({admin_user_id:0}))},{default:r((()=>a[9]||(a[9]=[p("新增")]))),_:1})),[[G,["admin/user/edit"]]])]),i(Y,{data:O.value,"row-key":"admin_user_id","default-expand-all":"",class:"mt5"},{default:r((()=>[i(L,{prop:"admin_user_id",label:"ID","min-width":"10",sortable:""}),i(L,{prop:"merchant_name",label:"商户名称","min-width":"10"}),i(L,{prop:"real_name",label:"管理员姓名","min-width":"10"}),i(L,{prop:"username",label:"用户名","min-width":"10"}),i(L,{prop:"role_name",label:"所属角色","min-width":"10"}),i(L,{prop:"created_at",label:"创建时间","min-width":"10"}),i(L,{label:"操作",align:"center",width:"220","min-width":"220"},{default:r((({row:e})=>[c((t(),m(K,{type:"primary",onClick:a=>E(e)},{default:r((()=>a[10]||(a[10]=[p("编辑")]))),_:2},1032,["onClick"])),[[G,["admin/user/edit"]]]),c((t(),m(K,{type:"danger",onClick:a=>(async({admin_user_id:e})=>{v.confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await g("/admin/user/delete/"+e)&&(h({type:"success",message:"删除成功"}),H())})).catch((()=>{}))})(e)},{default:r((()=>a[11]||(a[11]=[p("删除")]))),_:2},1032,["onClick"])),[[G,["admin/user/delete"]]])])),_:1})])),_:1},8,["data"]),i(Z,{background:"",layout:"total, sizes, prev, pager, next, ->,jumper","current-page":I.value.page,"onUpdate:currentPage":a[4]||(a[4]=e=>I.value.page=e),"page-size":I.value.page_size,"onUpdate:pageSize":a[5]||(a[5]=e=>I.value.page_size=e),total:I.value.total,class:"ml10 mt10",onSizeChange:T,onCurrentChange:A},null,8,["current-page","page-size","total"])])),_:1}),i(k,{modelValue:U.value,"onUpdate:modelValue":a[6]||(a[6]=e=>U.value=e),data:B,rolenameOptions:D.value,onSubmit:H},null,8,["modelValue","data","rolenameOptions"])])}}}),[["__scopeId","data-v-0afa41c6"]]);export{O as default};
