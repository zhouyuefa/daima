import{_ as a,a6 as e,a7 as s,R as l,h as t,f as d,g as u,o,L as r,w as m,d as p,c as i,J as n,K as c,e as _,H as f,y as g,A as w,B as v,a8 as b,a9 as y,D as V,E as h,aa as x}from"./index-BdR_P0jW.js";const k=a({__name:"resetPwd",props:e({data:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:e(["submit"],["update:modelValue"]),setup(a,{emit:e}){const k=s(a,"modelValue"),j=e,U=a,q=l((()=>U.data.admin_user_id));t(q,(async a=>{Object.assign(O.value,U.data),O.value.status=1})),t(k,(a=>{a||D.value.clearValidate()}));const D=d(null),O=d({}),R=u({password:[{required:!0,message:"请输入密码",trigger:"blur"}],repeat_password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),A=d([{label:"新密码:",type:"text",msg:"password"},{label:"确认新密码:",type:"text",msg:"repeat_password"}]),B=async()=>{let a=O.value;if(a.password!==a.repeat_password)return void f({message:"两次密码输入不一致",type:"warning"});await g("/admin/companies/reset_password",a)&&(f.success("重置成功"),j("submit"),k.value=!1)};return(a,e)=>{const s=w,l=v,t=b,d=y,u=V,f=h,g=x;return o(),r(g,{modelValue:k.value,"onUpdate:modelValue":e[1]||(e[1]=a=>k.value=a),title:"重置密码",width:"24%",top:"25vh",class:"form-dialog","close-on-click-modal":!1},{default:m((()=>[p(f,{ref_key:"formDataRef",ref:D,model:O.value,"label-width":"auto",rules:R},{default:m((()=>[p(d,null,{default:m((()=>[(o(!0),i(n,null,c(A.value,((a,e)=>(o(),r(t,{span:24,key:e,class:"row-bg"},{default:m((()=>[p(l,{label:a.label,prop:a.msg},{default:m((()=>[p(s,{modelValue:O.value[a.msg],"onUpdate:modelValue":e=>O.value[a.msg]=e,type:"password",autocomplete:"new-password"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","prop"])])),_:2},1024)))),128))])),_:1}),p(l,{class:"text-right mt20"},{default:m((()=>[p(u,{type:"primary",onClick:e[0]||(e[0]=a=>(async a=>{a&&a.validate((a=>{a&&B()}))})(D.value))},{default:m((()=>e[2]||(e[2]=[_("保存")]))),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-28a36969"]]);export{k as default};
