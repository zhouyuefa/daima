import{_ as a,u as e,f as s,g as t,ah as n,o as i,c as l,d as c,w as o,a as r,F as d,L as m,e as u,t as p,P as _,i as y,y as f,T as b,ai as x,aj as w,H as g,ak as h,D as j,a3 as k,a0 as v,z as C,a4 as T}from"./index-BdR_P0jW.js";/* empty css                */import B from"./accessForm-7KrENoqM.js";import{E as V}from"./index-C5ggMqbd.js";/* empty css                *//* empty css                       */import"./index-C81ng_c9.js";import"./index-DTPeqqvl.js";import"./index-D1LW7kyL.js";import"./index-SLBSEZ_O.js";const I=["onClick"],O=a(Object.assign({name:"admin/access/index"},{__name:"index",setup(a){const O=e(),U=s([]),z=s(!1),D=t({}),F={0:{tag:"success",label:"权限"},1:{tag:"primary",label:"菜单"}},P=async()=>{const a=await f("/admin/merchant/menu/lists");U.value=(null==a?void 0:a.lists)||[]},R=a=>{(a=>{for(const e of Object.keys(a))delete a[e]})(D),Object.assign(D,a),z.value=!0},S=async()=>{await O.getUserRole(),b.emit("menusChange"),P()};return(async()=>{P()})(),(a,e)=>{const s=j,t=k,f=v,b=C,O=T,P=V,E=n("hasPermi");return i(),l("div",null,[c(P,null,{header:o((()=>e[2]||(e[2]=[r("span",null,"菜单与权限",-1)]))),default:o((()=>[d((i(),m(s,{class:"mb8",type:"primary",onClick:e[0]||(e[0]=a=>R({access_id:0}))},{default:o((()=>e[3]||(e[3]=[u("添加")]))),_:1})),[[E,["admin/access/edit"]]]),c(O,{data:U.value,"row-key":"access_id",border:"","default-expand-all":"",class:"no-card-table mt5"},{default:o((()=>[c(t,{prop:"access_id",label:"ID",width:"210px",sortable:""}),c(t,{prop:"access_name",label:"名称","min-width":"10"}),c(t,{prop:"uri",label:"URI","min-width":"20"}),c(t,{prop:"sort",label:"排序",width:"150px",align:"center"},{default:o((({row:a})=>[r("span",{class:"text-primary cursor-pointer",onClick:e=>(a=>{x.prompt("请输入排序","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number",inputValue:a.sort}).then((async({value:e})=>{await h(`/admin/access/index/sort/${a.access_id}`,{sort:e.toString()})&&(g({type:"success",message:"操作成功"}),S())})).catch((()=>{}))})(a)},p(a.sort),9,I)])),_:1}),c(t,{prop:"is_menu",label:"类型",width:"90px",align:"center"},{default:o((({row:a})=>[c(f,{type:F[a.is_menu].tag},{default:o((()=>[u(p(F[a.is_menu].label),1)])),_:2},1032,["type"])])),_:1}),c(t,{prop:"menu_icon",label:"图标",width:"80px",align:"center"},{default:o((({row:a})=>[a.menu_icon?(i(),m(b,{key:0,size:"18",class:"mt5"},{default:o((()=>[(i(),m(_(a.menu_icon)))])),_:2},1024)):y("",!0)])),_:1}),c(t,{label:"操作",align:"center",width:"220","min-width":"220"},{default:o((({row:a})=>[d((i(),m(s,{type:"primary",onClick:e=>R(a)},{default:o((()=>e[4]||(e[4]=[u("编辑")]))),_:2},1032,["onClick"])),[[E,["admin/access/edit"]]]),d((i(),m(s,{type:"danger",onClick:e=>(async({access_id:a})=>{x.confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await w("/admin/access/delete/"+a)&&(g({type:"success",message:"删除成功"}),S())})).catch((()=>{}))})(a)},{default:o((()=>e[5]||(e[5]=[u("删除")]))),_:2},1032,["onClick"])),[[E,["admin/access/delete"]]])])),_:1})])),_:1},8,["data"])])),_:1}),c(B,{modelValue:z.value,"onUpdate:modelValue":e[1]||(e[1]=a=>z.value=a),data:D,onSubmit:S},null,8,["modelValue","data"])])}}}),[["__scopeId","data-v-b234a8a0"]]);export{O as default};
