import{f as e,y as a,g as l,T as t,S as s,r,o,c as i,a as n,d as p,w as d,e as u,t as c,aw as h,D as b,aa as g}from"./index-BdR_P0jW.js";/* empty css                */import m from"./shopTypeForm-BEwN3SaN.js";import{E as v}from"./index-C5CR2e01.js";import"./dialogComp-DpPpTGA3.js";import"./index-DIDL6cCO.js";/* empty css                    */import"./index-TSZus3Mb.js";const _={class:"boxElMain"},y={class:"box boxFlex"},w={class:"dialog-footer"},f={__name:"index",setup(f){const x=e({getList:"/admin/merchant/order/main_order_list"}),C=e([{label:"全部",value:"all"},{label:"待支付",value:"1"},{label:"已支付",value:"2"},{label:"部分支付",value:"3"},{label:"取消",value:"4"}]),W=e([{type:"Select",label:"状态",prop:"status",width:"280px",options:C,placeholder:"请选择状态"},{type:"DateRange",label:"创建时间",prop:"created_at",width:"280px"}]),j=e({name:"",status:"all",created_at:[]}),D=e([{label:"查 询",icon:"Search",handle:()=>V()},{label:"重置",handle:()=>k()},{label:"排序",popover:!0}]),T=e([]),H=e({page:1,page_size:20}),N=e([{label:"ID",prop:"id",align:"center",type:"string",sortable:!1,minWidth:"80",show:!0},{label:"主订单编号",prop:"order_no",align:"center",type:"string",sortable:!1,minWidth:"150",show:!0},{label:"总价格（TN）",prop:"total_price",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"订单价格（TN）",prop:"order_price",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"消费税（TN）",prop:"tax_price",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"总价格（CNY）",prop:"total_price_r",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"订单价格（CNY）",prop:"order_price_r",align:"center",type:"string",sortable:!1,minWidth:"130",show:!0},{label:"消费税（CNY）",prop:"tax_price_r",align:"center",type:"string",sortable:!1,minWidth:"120",show:!0},{label:"汇率",prop:"exchange_rate",align:"center",type:"string",sortable:!1,minWidth:"80",show:!0},{label:"创建时间",prop:"created_at",align:"center",type:"string",sortable:!1,minWidth:"160",show:!0},{label:"状态",prop:"status_text",align:"center",type:"string",sortable:!1,minWidth:"110",show:!0}]),V=()=>{H.value.page=1,F()},k=()=>{(e=>{for(const a of Object.keys(e))delete e[a]})(j.value),H.value.page=1,H.value.page_size=20,j.value.status="all",F()},E=e(!1),F=async()=>{const e=await a(x.value.getList,{...H.value,...j.value});if(e&&(T.value=[],H.value.total=e.page.total||0,T.value.splice(0),e.list.length>0))for(let a=0;a<e.list.length;a++){let l=e.list[a];T.value.push(l)}},S=l({});t.on("getCheckData",(e=>{(e=>{const a=[];e.list.forEach((e=>{a.push(e.label)})),N.value.sort(((e,l)=>"操作"===e.label?1:a.indexOf(e.label)-a.indexOf(l.label))),N.value=N.value.map((a=>e.data.includes(a.label)||"操作"===a.label?{...a,show:!0}:{...a,show:!1}))})(e)})),s((()=>{F()}));const L=e(!1),O=async()=>{let e={id:S.id};await a("/admin/merchant/type/update_status",e)&&(F(),L.value=!1)};return(e,a)=>{const l=h,t=r("cusTable"),s=v,f=b,x=g;return o(),i("div",_,[n("div",y,[p(s,null,{default:d((()=>[p(l,{searchForm:W.value,searchData:j.value,searchHandle:D.value,tableCols:N.value,onHandleEnterSearch:V,onHandleReset:k},null,8,["searchForm","searchData","searchHandle","tableCols"]),p(t,{ref:"cusTable",height:"calc(100vh - 240px)","row-key":"id",isPagination:!0,isHandle:!0,tableCols:N.value,tableData:T.value,tablePage:H.value,onHandleCurrentChange:F},null,8,["tableCols","tableData","tablePage"])])),_:1})]),p(m,{modelValue:E.value,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value=e),data:S,onRefreshList:F},null,8,["modelValue","data"]),p(x,{modelValue:L.value,"onUpdate:modelValue":a[2]||(a[2]=e=>L.value=e),title:"提示",width:"500"},{footer:d((()=>[n("div",w,[p(f,{onClick:a[1]||(a[1]=e=>L.value=!1)},{default:d((()=>a[3]||(a[3]=[u("取消")]))),_:1}),p(f,{type:"primary",onClick:O},{default:d((()=>a[4]||(a[4]=[u(" 确定 ")]))),_:1})])])),default:d((()=>[n("span",null,"确定要"+c(1===S.status?"禁用":"启用")+"该类型吗",1)])),_:1},8,["modelValue"])])}}};export{f as default};
