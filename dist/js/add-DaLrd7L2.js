import{_ as e,R as l,h as a,f as t,j as u,g as r,r as d,F as o,a2 as i,o as n,c as m,d as s,w as p,a as g,t as _,bW as c,bX as b,J as f,K as V,L as v,e as h,aJ as y,i as x,y as w,z as U,A as k,B as q,a8 as j,au as A,ad as C,ae as D,D as z,M as O,N as M,a9 as R,E as S}from"./index-BdR_P0jW.js";/* empty css                */import{_ as E,T as P}from"./index-PFFTJ-rA.js";import{P as F}from"./index-DIDL6cCO.js";import{E as I}from"./index-C5ggMqbd.js";/* empty css                    */import"./index-TSZus3Mb.js";const J={class:"app-container"},L={style:{"margin-bottom":"20px","font-size":"20px"}},T={style:{"vertical-align":"2px","padding-left":"20px"}},W=e({__name:"add",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"新增商户"},selectedRowData:{type:Object,default:()=>({id:"0000000"})}},emits:["commit","closeAddPage"],setup(e,{emit:W}){const Z=W,B=e,N=l((()=>B.selectedRowData.id));a(N,(async e=>{e&&B.modelValue&&(X(),ee(B.selectedRowData.province),G.value=!0)}));const G=t(!1),K=e=>{var l;for(const a of Object.keys(e))delete e[a];null==(l=null==ae?void 0:ae.value)||l.clearValidate()};a((()=>B.modelValue),(async e=>{e&&!N.value?(K(le),G.value=!0):e||(G.value=!1)}));const X=()=>{let e=JSON.parse(JSON.stringify(B.selectedRowData));e.logo_img=e.logo_img_url||{},e.banner_img=e.banner_img_url||[],e.material_img=e.material_img_url||[],Object.assign(le,e)},$=()=>{K(le),Z("closeAddPage")},H=()=>{ae.value.validate((e=>{if(!e)return!1;Z("closeAddPage",le)}))},Q=t([]);(async()=>{const e=await u("/admin/area_jp/index/list",{parent_code:0});Q.value=e||[]})();const Y=t([]),ee=async e=>{const l=await u("/admin/area_jp/index/list",{parent_code:e});Y.value=l||[]},le=r({}),ae=t(null),te=t({xl:8,lg:8,md:12,sm:24,xs:24}),ue=t({xl:10,lg:12,md:12,sm:24,xs:24}),re=t({name:[{required:!0,message:"请输入商户名称",trigger:"blur"},{min:1,max:100,message:"长度最大100",trigger:"blur"}],merchant_type:[{required:!0,message:"请选择商户类型",trigger:"change"}],subtitle:[{required:!0,message:"请输入副标题",trigger:"blur"},{min:1,max:100,message:"长度最大100",trigger:"blur"}],mobile:[{required:!0,message:"请输入服务电话",trigger:"blur"},{min:1,max:20,message:"长度最大20",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{pattern:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,message:"邮箱格式不正确",trigger:"blur"}],province:[{required:!0,message:"请选择都道府县",trigger:"change"}],city:[{required:!0,message:"请选择市区町村",trigger:"change"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"},{min:1,max:200,message:"长度最大200",trigger:"blur"}],lnglat:[{required:!0,message:"请输入经纬度",trigger:"blur"}],account_name:[{required:!0,message:"请输入公司全称/账户名",trigger:"blur"},{min:1,max:100,message:"长度最大100",trigger:"blur"}],account_number:[{required:!0,message:"请输入银行账户",trigger:"blur"},{min:1,max:30,message:"长度最大30",trigger:"blur"}],bank_type:[{required:!0,message:"请选择账户类型",trigger:"change"}],account_bank:[{required:!0,message:"请输入开户银行",trigger:"blur"},{min:1,max:100,message:"长度最大100",trigger:"blur"}],branch:[{required:!0,message:"请输入支店",trigger:"blur"},{min:1,max:100,message:"长度最大100",trigger:"blur"}],swift_code:[{required:!0,message:"请输入SWIFT CODE",trigger:"blur"}],logo_img:[{required:!0,message:"请选择商户封面图",trigger:"change"}],banner_img:[{required:!0,message:"请选择商户轮播图",trigger:"change"}],banner_img:[{required:!0,message:"请选择商户轮播图",trigger:"change"}],material_img:[{required:!0,message:"请选择资质材料",trigger:"change"}],description:[{required:!0,message:"请输入商户详情",trigger:"blur"}],login_name:[{required:!0,message:"请输入商户登录账号",trigger:"blur"}],login_password:[{required:!0,message:"请输入商户登录密码",trigger:"blur"}],user_id:[{required:!0,message:"请输入商户用户端账号",trigger:"blur"}],chn_disabled:[{required:!0,message:"请选择",trigger:"change"}]}),de=e=>{(e=>{for(let l in e)return!1;return!0})(e)||(le.logo_img=e,le.logo_img_url=e)},oe=e=>{e.length>0&&(le.banner_img=e,le.banner_img_url=e)},ie=e=>{e.length>0&&(le.material_img=e,le.material_img_url=e)},ne=t([]);(async()=>{const e=await w("/admin/merchant/type/tree_list");ne.value=(null==e?void 0:e.map((e=>{var l;return(null==(l=e.children)?void 0:l.length)>0&&(e.children=e.children.map((e=>({value:e.key,label:e.name})))),{value:e.key,label:e.name,children:e.children}})))||[]})();const me=t([]),se=()=>window.open("https://api.map.baidu.com/lbsapi/getpoint/index.html"),pe=t(!1),ge=async e=>{if(e){pe.value=!0;let l={page:1,page_size:999,mobile:e,status:1};const a=await w("/admin/users/index/lists",l);a&&(pe.value=!1,me.value=a.lists.list.map((e=>({value:e.id,label:e.mobile+" / "+e.nickname}))))}else me.value=[]};return(l,a)=>{const t=d("DArrowLeft"),u=U,r=k,w=q,W=j,Z=A,B=C,N=D,K=d("AddLocation"),X=z,_e=O,ce=M,be=R,fe=S,Ve=I;return o((n(),m("div",J,[s(Ve,{bordered:!1},{default:p((()=>[g("p",L,[s(u,{style:{"font-size":"16px",cursor:"pointer"},onClick:$},{default:p((()=>[s(t)])),_:1}),g("span",{style:{"vertical-align":"3px","font-size":"16px",cursor:"pointer"},onClick:$},"返回"),g("span",T,_(e.title),1)]),s(fe,{ref_key:"formValidateRef",ref:ae,rules:re.value,model:le,"label-width":"140px"},{default:p((()=>[s(be,{gutter:24},{default:p((()=>[s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"商户名称：",prop:"name"},{default:p((()=>[s(r,{modelValue:le.name,"onUpdate:modelValue":a[0]||(a[0]=e=>le.name=e),placeholder:"请输入商户名称"},null,8,["modelValue"])])),_:1})])),_:1},16),s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"商户分类：",prop:"merchant_type"},{default:p((()=>[s(Z,{modelValue:le.merchant_type,"onUpdate:modelValue":a[1]||(a[1]=e=>le.merchant_type=e),"show-all-levels":!1,style:{width:"100%"},options:ne.value},null,8,["modelValue","options"])])),_:1})])),_:1},16),s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"副标题：",prop:"subtitle"},{default:p((()=>[s(r,{modelValue:le.subtitle,"onUpdate:modelValue":a[2]||(a[2]=e=>le.subtitle=e),placeholder:"请输入副标题"},null,8,["modelValue"])])),_:1})])),_:1},16),s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"服务电话：",prop:"mobile"},{default:p((()=>[s(r,{modelValue:le.mobile,"onUpdate:modelValue":a[3]||(a[3]=e=>le.mobile=e),type:"number",placeholder:"请输入服务电话"},null,8,["modelValue"])])),_:1})])),_:1},16),s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"都道府县：",prop:"province"},{default:p((()=>[s(N,{modelValue:le.province,"onUpdate:modelValue":a[4]||(a[4]=e=>le.province=e),filterable:"",clearable:"",onChange:a[5]||(a[5]=e=>ee(le.province))},{default:p((()=>[(n(!0),m(f,null,V(Q.value,(e=>(n(),v(B,{value:e.area_code,key:e.area_code,label:e.area_name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},16),s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"市区町村：",prop:"city"},{default:p((()=>[s(N,{modelValue:le.city,"onUpdate:modelValue":a[6]||(a[6]=e=>le.city=e),filterable:"",clearable:""},{default:p((()=>[(n(!0),m(f,null,V(Y.value,(e=>(n(),v(B,{value:e.area_code,key:e.area_code,label:e.area_name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},16),s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"详细地址：",prop:"address"},{default:p((()=>[s(r,{modelValue:le.address,"onUpdate:modelValue":a[7]||(a[7]=e=>le.address=e),type:"input",placeholder:"请输入详细地址"},null,8,["modelValue"])])),_:1})])),_:1},16),s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"经纬度：",prop:"lnglat"},{default:p((()=>[s(r,{modelValue:le.lnglat,"onUpdate:modelValue":a[8]||(a[8]=e=>le.lnglat=e),style:{width:"calc(100% - 200px)"},placeholder:"请输入经纬度"},null,8,["modelValue"]),s(X,{style:{width:"180px","margin-left":"10px"},onClick:se,type:"primary",link:""},{default:p((()=>[s(u,null,{default:p((()=>[s(K)])),_:1}),a[24]||(a[24]=h(" 获取经纬度 "))])),_:1})])),_:1})])),_:1},16),s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"公司全称/账户名：",prop:"account_name"},{default:p((()=>[s(r,{modelValue:le.account_name,"onUpdate:modelValue":a[9]||(a[9]=e=>le.account_name=e),type:"input",placeholder:"请输入公司全称/账户名"},null,8,["modelValue"])])),_:1})])),_:1},16),s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"银行账号：",prop:"account_number"},{default:p((()=>[s(r,{modelValue:le.account_number,"onUpdate:modelValue":a[10]||(a[10]=e=>le.account_number=e),type:"number",placeholder:"请输入银行账号"},null,8,["modelValue"])])),_:1})])),_:1},16),s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"账号类型：",prop:"bank_type"},{default:p((()=>[s(ce,{modelValue:le.bank_type,"onUpdate:modelValue":a[11]||(a[11]=e=>le.bank_type=e)},{default:p((()=>[s(_e,{value:1,label:"企业"}),s(_e,{value:2,label:"个人"})])),_:1},8,["modelValue"])])),_:1})])),_:1},16),s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"开户银行：",prop:"account_bank"},{default:p((()=>[s(r,{modelValue:le.account_bank,"onUpdate:modelValue":a[12]||(a[12]=e=>le.account_bank=e),type:"input",placeholder:"请输入开户银行"},null,8,["modelValue"])])),_:1})])),_:1},16),s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"支店：",prop:"branch"},{default:p((()=>[s(r,{modelValue:le.branch,"onUpdate:modelValue":a[13]||(a[13]=e=>le.branch=e),type:"input",placeholder:"请输入支店"},null,8,["modelValue"])])),_:1})])),_:1},16),s(W,c(b(ue.value)),{default:p((()=>[s(w,{label:"SWIFT CODE：",prop:"swift_code"},{default:p((()=>[s(r,{modelValue:le.swift_code,"onUpdate:modelValue":a[14]||(a[14]=e=>le.swift_code=e),type:"input",placeholder:"请输入SWIFT CODE"},null,8,["modelValue"])])),_:1})])),_:1},16),s(W,{span:24},{default:p((()=>[s(w,{label:"商户封面图：",prop:"logo_img"},{default:p((()=>[s(F,{modelValue:le.logo_img,"onUpdate:modelValue":a[15]||(a[15]=e=>le.logo_img=e),onGetPic:de,group:"merLogo",tip:"图片大小不超过2M，最多上传1张，比例大小1:1",file_type:"image",num:1,width:"150px",height:"150px"},null,8,["modelValue"])])),_:1})])),_:1}),s(W,{span:24},{default:p((()=>[s(w,{label:"商户轮播图：",prop:"banner_img"},{default:p((()=>[s(E,{modelValue:le.banner_img,"onUpdate:modelValue":a[16]||(a[16]=e=>le.banner_img=e),tip:"图片大小不超过2M，最多上传5张，比例大小4:3",group:"merBanner",file_type:"image",onMulpicUpload:oe,num:5,width:"200px",height:"150px"},null,8,["modelValue"])])),_:1})])),_:1}),s(W,{span:24},{default:p((()=>[s(w,{label:"资质材料：",prop:"material_img"},{default:p((()=>[s(E,{modelValue:le.material_img,"onUpdate:modelValue":a[17]||(a[17]=e=>le.material_img=e),group:"material",file_type:"image",tip:"图片大小不超过2M，最多上传5张",onMulpicUpload:ie,num:5,width:"150px",height:"150px"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),s(be,null,{default:p((()=>[s(W,{span:24},{default:p((()=>[s(w,{label:"商户详情：",prop:"description"},{default:p((()=>[s(P,{modelValue:le.description,"onUpdate:modelValue":a[18]||(a[18]=e=>le.description=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),s(be,null,{default:p((()=>[s(W,c(b(te.value)),{default:p((()=>[s(w,{label:"中国区限制访问：",prop:"chn_disabled"},{default:p((()=>[s(ce,{modelValue:le.chn_disabled,"onUpdate:modelValue":a[19]||(a[19]=e=>le.chn_disabled=e)},{default:p((()=>[s(_e,{value:2,label:"限制访问"}),s(_e,{value:1,label:"不限制"})])),_:1},8,["modelValue"])])),_:1})])),_:1},16)])),_:1}),s(be,null,{default:p((()=>[s(W,c(b(te.value)),{default:p((()=>[s(w,{label:"登录账号：",prop:"login_name"},{default:p((()=>[s(r,{modelValue:le.login_name,"onUpdate:modelValue":a[20]||(a[20]=e=>le.login_name=e),disabled:"新增商户"!==e.title,placeholder:"请输入"},null,8,["modelValue","disabled"])])),_:1})])),_:1},16),s(W,c(b(te.value)),{default:p((()=>[s(w,{label:"邮箱：",prop:"email"},{default:p((()=>[s(r,{modelValue:le.email,"onUpdate:modelValue":a[21]||(a[21]=e=>le.email=e),disabled:"新增商户"!==e.title,placeholder:"请输入邮箱"},null,8,["modelValue","disabled"])])),_:1})])),_:1},16),"新增商户"===e.title?(n(),v(W,c(y({key:0},te.value)),{default:p((()=>[s(w,{label:"登录密码：",prop:"login_password"},{default:p((()=>[s(r,{modelValue:le.login_password,"onUpdate:modelValue":a[22]||(a[22]=e=>le.login_password=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},16)):x("",!0),s(W,c(b(te.value)),{default:p((()=>[s(w,{label:"用户端账号：",prop:"user_id"},{default:p((()=>[s(N,{modelValue:le.user_id,"onUpdate:modelValue":a[23]||(a[23]=e=>le.user_id=e),disabled:"新增商户"!==e.title,filterable:"",remote:"","reserve-keyword":"",placeholder:"输入手机号查询","remote-method":ge,loading:pe.value},{default:p((()=>[(n(!0),m(f,null,V(me.value,(e=>(n(),v(B,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled","loading"])])),_:1})])),_:1},16)])),_:1}),s(w,null,{default:p((()=>[s(X,{onClick:$},{default:p((()=>a[25]||(a[25]=[h("取消")]))),_:1}),s(X,{type:"primary",onClick:H},{default:p((()=>a[26]||(a[26]=[h("保存")]))),_:1})])),_:1})])),_:1},8,["rules","model"])])),_:1})],512)),[[i,G.value]])}}},[["__scopeId","data-v-d0e8fec5"]]);export{W as default};
