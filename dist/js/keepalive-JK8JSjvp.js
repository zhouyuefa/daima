import{aQ as e,aR as a,x as n,v as s,g as u,H as t}from"./index-BdR_P0jW.js";const r=a("keepaliveStore",(()=>{const e=n(),a=s(),r=u({activeMenu:{},menuTags:new Set,kaRoutes:[]}),i=e=>{const{name:n}=a,s=r.kaRoutes.findIndex((a=>a===(e||n)));s>-1&&r.kaRoutes.splice(s,1)},m=(e,a,n)=>{Object.assign(r.activeMenu,{menuId:e,accessName:a,menuPath:n})},o=e=>{let a=!1;for(const n of r.menuTags){if(a)return n;e===n.menu_id&&(a=!0)}return!1};return{addMenuTag:(e,a)=>{r.menuTags.size>=10?t.warning("标签最多保留10个"):(r.menuTags.add(a),m(e,a.access_name,a.url))},deleteMenuTag:(a,n)=>{if(1===r.menuTags.size)t.warning("标签至少保留一个");else{if(a===r.activeMenu.menuId){const{url:n,menu_id:s,access_name:u,isExternal:t=!1,query:i={}}=(e=>{let a=null;for(const n of r.menuTags){if(e===n.menu_id&&!a)return o(e);if(e===n.menu_id&&a)return a;a=n}})(a);t?e.replace({name:"redirect",params:{url:n},query:i}):e.replace(n),m(s,u,n)}for(const e of r.menuTags)e.menu_id===a&&r.menuTags.delete(e);i(n)}},setActiveMenu:m,addKaRoute:e=>{const{meta:{keepAlive:n=!0},name:s}=a;n&&!r.kaRoutes.includes(e||s)&&r.kaRoutes.push(e||s)},deleteKaRoute:i,states:r}})),i=()=>r(e);export{i as u};
