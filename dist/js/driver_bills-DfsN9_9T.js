import{_ as e,f as a,a1 as l,g as t,o as d,c as i,d as r,w as u,a as s,J as n,K as p,L as o,e as _,t as m,l as v,y as c,j as w,ad as h,ae as b,am as g,D as f,a3 as y,a4 as z,a5 as V}from"./index-BdR_P0jW.js";/* empty css                */import{E as x}from"./index-C5ggMqbd.js";const k={class:"mb20"},j=e(Object.assign({name:"company/drivers/driver_bills"},{__name:"driver_bills",setup(e){const j=a([]),U=a({admin_user_id:"",driver_user_id:"",type:"",created_at:[]}),C=l({1:"收入",2:"提现",4:"账单"});l({balance:"余额",wechat:"微信",alipay:"支付宝",bank:"银行卡"});const D=a([]),N=a([]),T=t([{value:"",label:"全部"},{value:1,label:"收入"},{value:2,label:"提现"},{value:4,label:"账单"}]),Y=a({page:1,page_size:20,total:0}),H=async()=>{let e={page:Y.value.page,page_size:Y.value.page_size,type:U.value.type};U.value.admin_user_id&&(e.admin_user_id=U.value.admin_user_id),U.value.driver_user_id&&(e.driver_user_id=U.value.driver_user_id),U.value.created_at&&(e.created_at=U.value.created_at);const a=await c("/admin/driverBill/index/lists",e);a&&(j.value=(null==a?void 0:a.list)||[],Y.value=(null==a?void 0:a.page)||{})},M=async()=>{const e=await w("/admin/companies/index/lists",{page:1,page_size:1e3});e&&(D.value=e.lists.list)},S=async()=>{const e=await w("/admin/drivers/audit_success");N.value=e||[]},A=e=>{Y.value.page_size=e,H()},B=e=>{Y.value.page=e,H()};return(async()=>{H(),M(),S()})(),(e,a)=>{const l=h,t=b,c=g,w=f,M=y,S=z,E=V,I=x;return d(),i("div",null,[r(I,null,{header:u((()=>a[7]||(a[7]=[s("span",null,"司机流水",-1)]))),default:u((()=>[s("div",k,[r(t,{modelValue:U.value.admin_user_id,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value.admin_user_id=e),placeholder:"汽车公司",style:{width:"280px"},clearable:""},{default:u((()=>[(d(!0),i(n,null,p(D.value,(e=>(d(),o(l,{key:e.admin_user_id,label:e.real_name,value:e.admin_user_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),r(t,{modelValue:U.value.driver_user_id,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value.driver_user_id=e),placeholder:"司机名",style:{width:"280px"},class:"ml30",clearable:"",filterable:""},{default:u((()=>[(d(!0),i(n,null,p(N.value,(e=>(d(),o(l,{key:e.id,label:e.full_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),r(t,{modelValue:U.value.type,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value.type=e),placeholder:"类型",style:{width:"280px"},class:"ml30"},{default:u((()=>[(d(!0),i(n,null,p(T,(e=>(d(),o(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),r(c,{class:"ml30",modelValue:U.value.created_at,"onUpdate:modelValue":a[3]||(a[3]=e=>U.value.created_at=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)]},null,8,["modelValue","default-time"]),r(w,{class:"ml30",type:"primary",onClick:a[4]||(a[4]=e=>(Y.value.page=1,void H()))},{default:u((()=>a[8]||(a[8]=[_("查询")]))),_:1})]),r(S,{data:j.value,"row-key":"id","default-expand-all":"",class:"mt5"},{default:u((()=>[r(M,{prop:"full_name",label:"司机名称","min-width":"10",width:"180"},{default:u((({row:e})=>[s("span",null,m(e.user&&e.user.sur)+m(e.user&&e.user.name),1)])),_:1}),r(M,{prop:"type",label:"汽车公司名称","min-width":"10",width:"180"},{default:u((({row:e})=>[s("span",null,m(e.user&&e.user.admin_real_name),1)])),_:1}),r(M,{prop:"bill_no",label:"流水号","min-width":"10",width:"180"}),r(M,{label:"订单号","min-width":"10",width:"180"},{default:u((({row:e})=>{var a;return[s("span",null,m((null==(a=e.order_car)?void 0:a.order_no)||"--"),1)]})),_:1}),r(M,{prop:"type",label:"类型","min-width":"10",width:"100"},{default:u((({row:e})=>[s("span",null,m(v(C)[e.type]?v(C)[e.type]:"--"),1)])),_:1}),r(M,{label:"司机分成比例","min-width":"10",width:"120"},{default:u((({row:e})=>[s("span",null,m(e.driver_rate)+"%",1)])),_:1}),r(M,{prop:"driver_take_price",label:"司机接单金额(TN)","min-width":"10",width:"140"}),r(M,{prop:"comment_rate",label:"评价比例","min-width":"10",width:"100"},{default:u((({row:e})=>[s("span",null,m(e.comment_rate)+"%",1)])),_:1}),r(M,{prop:"price",label:"实际入账(TN)","min-width":"10",width:"120"}),r(M,{prop:"value_after",label:"WACN余额(TN)","min-width":"10",width:"120"}),r(M,{prop:"freeze_after",label:"冻结金额","min-width":"10",width:"120"}),r(M,{prop:"pay_type",label:"支付方式","min-width":"10",width:"100"},{default:u((({row:e})=>a[9]||(a[9]=[s("span",null,"余额",-1)]))),_:1}),r(M,{prop:"income",label:"累计收入(TN)","min-width":"10",width:"120"}),r(M,{prop:"created_at",label:"创建时间","min-width":"10",width:"160"})])),_:1},8,["data"]),r(E,{background:"",layout:"total, sizes, prev, pager, next, ->,jumper","current-page":Y.value.page,"onUpdate:currentPage":a[5]||(a[5]=e=>Y.value.page=e),"page-size":Y.value.page_size,"onUpdate:pageSize":a[6]||(a[6]=e=>Y.value.page_size=e),total:Y.value.total,class:"ml10 mt10",onSizeChange:A,onCurrentChange:B},null,8,["current-page","page-size","total"])])),_:1})])}}}),[["__scopeId","data-v-f6360fc1"]]);export{j as default};
