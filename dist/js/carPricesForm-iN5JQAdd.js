import{a6 as e,a7 as a,R as l,f as d,g as u,h as t,j as r,o as s,L as i,w as o,d as m,c as n,J as _,K as b,e as v,t as c,y as p,H as f,ad as V,ae as g,B as y,A as h,D as q,E as w,aa as U}from"./index-BdR_P0jW.js";const k={__name:"carPricesForm",props:e({data:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:e(["submit"],["update:modelValue"]),setup(e,{emit:k}){const j=a(e,"modelValue"),x=k,C=e,D=l((()=>(C.data.id?"编辑":"新增")+"汽车价格配置")),R=l((()=>C.data.id)),A=d(null),B=d({}),E=d([]),F=d([]),H=d([]),J=d([]),K=d([]),L=d([]),M=u({airport_id:[{required:!0,message:"请选择机场",trigger:"blur"}],brand_id:[{required:!0,message:"请选择汽车品牌",trigger:"blur"}],style_id:[{required:!0,message:"请选择品牌系列",trigger:"blur"}],type_id:[{required:!0,message:"请选择车辆类型",trigger:"blur"}],seat_num:[{required:!0,message:"请输入座位数",trigger:"blur"}],level:[{required:!0,message:"请输入级别",trigger:"blur"}],tabs_id:[{required:!0,message:"请选择司机标签",trigger:"blur"}],car_tabs_id:[{required:!0,message:"请选择汽车标签",trigger:"blur"}],transfer_fee:[{required:!0,message:"请输入接送机价格",trigger:"blur"}],charter_fee:[{required:!0,message:"请输入接送机价格",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}]});t(j,(async e=>{e||A.value.clearValidate();const a=R.value??0,l=await r("/admin/car_prices/edit/"+a);if(!l)return;const{info:d}=l||{};B.value={...d};const u=N(B.value.tabs_id?B.value.tabs_id.split(","):[]);B.value.tabs_id=u;const t=N(B.value.car_tabs_id?B.value.car_tabs_id.split(","):[]);B.value.car_tabs_id=t,z(B.value.brand_id)}));const N=function(e){return e.map(Number)},O=async()=>{await p("/admin/car_prices/edit",{...B.value,tabs_id:B.value.tabs_id.join(","),car_tabs_id:B.value.car_tabs_id.join(",")})&&(f.success((C.data.id?"修改":"添加")+"成功"),x("submit"),j.value=!1)},P=()=>{var e;e=B,0!=R.value?(e.value.tabs_id="",e.value.car_tabs_id="",e.value.transfer_fee="",e.value.charter_fee="",e.value.sort=""):e.value={}},z=e=>{G(e)},G=async e=>{const a=await r("/admin/load/parent",{parent_id:e});H.value=(null==a?void 0:a.list)||[]},I=async e=>{const a=await r("/admin/load/dict",{q:"",type:e});let{list:l}=a;return l};return(async()=>{E.value=await I(1),F.value=await I(6),J.value=await I(3),K.value=await I(4),L.value=await I(7)})(),(e,a)=>{const l=V,d=g,u=y,t=h,r=q,p=w,f=U;return s(),i(f,{modelValue:j.value,"onUpdate:modelValue":a[13]||(a[13]=e=>j.value=e),title:D.value,width:"560",top:"20vh",class:"form-dialog","close-on-click-modal":!1},{default:o((()=>[m(p,{ref_key:"formDataRef",ref:A,model:B.value,"label-width":"auto",rules:M},{default:o((()=>[m(u,{label:"机场",prop:"airport_id"},{default:o((()=>[m(d,{modelValue:B.value.airport_id,"onUpdate:modelValue":a[0]||(a[0]=e=>B.value.airport_id=e),clearable:"",placeholder:"请选择机场",disabled:!!R.value},{default:o((()=>[(s(!0),n(_,null,b(E.value,(e=>(s(),i(l,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),m(u,{label:"汽车品牌",prop:"brand_id",class:"mt10"},{default:o((()=>[m(d,{modelValue:B.value.brand_id,"onUpdate:modelValue":a[1]||(a[1]=e=>B.value.brand_id=e),clearable:"",placeholder:"请选择汽车品牌",onChange:z,disabled:!!R.value},{default:o((()=>[(s(!0),n(_,null,b(F.value,(e=>(s(),i(l,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),m(u,{label:"品牌系列",prop:"style_id",class:"mt10"},{default:o((()=>[m(d,{modelValue:B.value.style_id,"onUpdate:modelValue":a[2]||(a[2]=e=>B.value.style_id=e),clearable:"",placeholder:"请选择品牌系列",disabled:!!R.value},{default:o((()=>[(s(!0),n(_,null,b(H.value,(e=>(s(),i(l,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),m(u,{label:"车辆类型",prop:"type_id",class:"mt10"},{default:o((()=>[m(d,{modelValue:B.value.type_id,"onUpdate:modelValue":a[3]||(a[3]=e=>B.value.type_id=e),clearable:"",placeholder:"请选择车辆类型",disabled:!!R.value},{default:o((()=>[(s(!0),n(_,null,b(J.value,(e=>(s(),i(l,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),m(u,{label:"座位数",prop:"seat_num",class:"mt10"},{default:o((()=>[m(t,{modelValue:B.value.seat_num,"onUpdate:modelValue":a[4]||(a[4]=e=>B.value.seat_num=e),type:"number",disabled:!!R.value,placeholder:"请输入座位数"},null,8,["modelValue","disabled"])])),_:1}),m(u,{label:"级别",prop:"level",class:"mt10"},{default:o((()=>[m(t,{modelValue:B.value.level,"onUpdate:modelValue":a[5]||(a[5]=e=>B.value.level=e),type:"number",disabled:!!R.value,placeholder:"请输入级别"},null,8,["modelValue","disabled"])])),_:1}),m(u,{label:"司机标签",prop:"tabs_id",class:"mt10"},{default:o((()=>[m(d,{modelValue:B.value.tabs_id,"onUpdate:modelValue":a[6]||(a[6]=e=>B.value.tabs_id=e),clearable:"",placeholder:"请输入司机标签",multiple:""},{default:o((()=>[(s(!0),n(_,null,b(K.value,(e=>(s(),i(l,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(u,{label:"汽车标签",class:"mt10",prop:"car_tabs_id"},{default:o((()=>[m(d,{modelValue:B.value.car_tabs_id,"onUpdate:modelValue":a[7]||(a[7]=e=>B.value.car_tabs_id=e),clearable:"",placeholder:"请输入汽车标签",multiple:""},{default:o((()=>[(s(!0),n(_,null,b(L.value,(e=>(s(),i(l,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(u,{label:"接送机价格",prop:"transfer_fee",class:"mt10"},{default:o((()=>[m(t,{modelValue:B.value.transfer_fee,"onUpdate:modelValue":a[8]||(a[8]=e=>B.value.transfer_fee=e),type:"number",placeholder:"请输入接送机价格"},null,8,["modelValue"])])),_:1}),m(u,{label:"包车价格",prop:"charter_fee",class:"mt10"},{default:o((()=>[m(t,{modelValue:B.value.charter_fee,"onUpdate:modelValue":a[9]||(a[9]=e=>B.value.charter_fee=e),type:"number",placeholder:"请输入包车价格"},null,8,["modelValue"])])),_:1}),m(u,{label:"排序",prop:"sort",class:"mt10"},{default:o((()=>[m(t,{modelValue:B.value.sort,"onUpdate:modelValue":a[10]||(a[10]=e=>B.value.sort=e),type:"number",placeholder:"排序"},null,8,["modelValue"])])),_:1}),m(u,{class:"text-right mt20 flex-end"},{default:o((()=>[m(r,{type:"primary",onClick:a[11]||(a[11]=e=>(async e=>{e&&e.validate((e=>{e&&O()}))})(A.value))},{default:o((()=>[v(" 立即"+c(C.data.id?"修改":"添加"),1)])),_:1}),m(r,{onClick:a[12]||(a[12]=e=>P(A.value))},{default:o((()=>a[14]||(a[14]=[v(" 重置 ")]))),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};export{k as default};
