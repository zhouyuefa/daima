import{aS as e,aT as t,aO as n,an as a,aC as l,o,L as s,w as u,aL as r,aJ as i,aG as d,aU as p,aV as c,aW as v,R as m,aX as h,ax as b,aY as f,O as x,aZ as M,f as g,a_ as I,a$ as y,g as C,h as S,V as k,S as E,ar as O,b0 as w,b1 as T,z as $,b2 as N,F as P,a2 as z,J as A,b3 as B,b4 as L,b5 as j,b6 as W,b7 as _,ap as R,b8 as q,b9 as V,ba as F,bb as G,bc as D,bd as J,be as Y,bf as Z,r as H,c as K,a as U,aK as X,e as Q,t as ee,aP as te,bg as ne}from"./index-BdR_P0jW.js";import{E as ae}from"./index-SLBSEZ_O.js";let le=class{constructor(e,t){this.parent=e,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,(a=>{a.addEventListener("keydown",(a=>{let l=!1;switch(a.code){case e.down:this.gotoSubIndex(this.subIndex+1),l=!0;break;case e.up:this.gotoSubIndex(this.subIndex-1),l=!0;break;case e.tab:t(n,"mouseleave");break;case e.enter:case e.numpadEnter:case e.space:l=!0,a.currentTarget.click()}return l&&(a.preventDefault(),a.stopPropagation()),!1}))}))}},oe=class{constructor(e,t){this.domNode=e,this.submenu=null,this.submenu=null,this.init(t)}init(e){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(`.${e}-menu`);t&&(this.submenu=new le(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",(n=>{let a=!1;switch(n.code){case e.down:t(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),a=!0;break;case e.up:t(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),a=!0;break;case e.tab:t(n.currentTarget,"mouseleave");break;case e.enter:case e.numpadEnter:case e.space:a=!0,n.currentTarget.click()}a&&n.preventDefault()}))}},se=class{constructor(e,t){this.domNode=e,this.init(t)}init(e){const t=this.domNode.childNodes;Array.from(t).forEach((t=>{1===t.nodeType&&new oe(t,e)}))}};var ue=n(a({name:"ElMenuCollapseTransition",setup(){const e=l("menu");return{listeners:{onBeforeEnter:e=>e.style.opacity="0.2",onEnter(t,n){p(t,`${e.namespace.value}-opacity-transition`),t.style.opacity="1",n()},onAfterEnter(t){c(t,`${e.namespace.value}-opacity-transition`),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),v(t,e.m("collapse"))?(c(t,e.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),p(t,e.m("collapse"))):(p(t,e.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),c(t,e.m("collapse"))),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(e){p(e,"horizontal-collapse-transition"),e.style.width=`${e.dataset.scrollWidth}px`}}}}}),[["render",function(e,t,n,a,l,p){return o(),s(d,i({mode:"out-in"},e.listeners),{default:u((()=>[r(e.$slots,"default")])),_:3},16)}],["__file","menu-collapse-transition.vue"]]);function re(e,t){const n=m((()=>{let n=e.parent;const a=[t.value];for(;"ElMenu"!==n.type.name;)n.props.index&&a.unshift(n.props.index),n=n.parent;return a}));return{parentMenu:m((()=>{let t=e.parent;for(;t&&!["ElMenu","ElSubMenu"].includes(t.type.name);)t=t.parent;return t})),indexPath:n}}function ie(e){return m((()=>{const t=e.backgroundColor;return t?new h(t).shade(20).toString():""}))}const de=(e,t)=>{const n=l("menu");return m((()=>n.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":ie(e).value||"","active-color":e.activeTextColor||"",level:`${t}`})))},pe=b({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:f},expandOpenIcon:{type:f},collapseCloseIcon:{type:f},collapseOpenIcon:{type:f}}),ce="ElSubMenu";var ve=a({name:ce,props:pe,setup(e,{slots:t,expose:n}){const a=B(),{indexPath:o,parentMenu:s}=re(a,m((()=>e.index))),u=l("menu"),r=l("sub-menu"),i=x("rootMenu");i||M(ce,"can not inject root menu");const d=x(`subMenu:${s.value.uid}`);d||M(ce,"can not inject sub menu");const p=g({}),c=g({});let v;const h=g(!1),b=g(),f=g(null),j=m((()=>"horizontal"===D.value&&_.value?"bottom-start":"right-start")),W=m((()=>"horizontal"===D.value&&_.value||"vertical"===D.value&&!i.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?F.value?e.expandOpenIcon:e.expandCloseIcon:I:e.collapseCloseIcon&&e.collapseOpenIcon?F.value?e.collapseOpenIcon:e.collapseCloseIcon:y)),_=m((()=>0===d.level)),R=m((()=>{const t=e.teleported;return void 0===t?_.value:t})),q=m((()=>i.props.collapse?`${u.namespace.value}-zoom-in-left`:`${u.namespace.value}-zoom-in-top`)),V=m((()=>"horizontal"===D.value&&_.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"])),F=m((()=>i.openedMenus.includes(e.index))),G=m((()=>{let e=!1;return Object.values(p.value).forEach((t=>{t.active&&(e=!0)})),Object.values(c.value).forEach((t=>{t.active&&(e=!0)})),e})),D=m((()=>i.props.mode)),J=C({index:e.index,indexPath:o,active:G}),Y=de(i.props,d.level+1),Z=m((()=>{var t;return null!=(t=e.popperOffset)?t:i.props.popperOffset})),H=m((()=>{var t;return null!=(t=e.popperClass)?t:i.props.popperClass})),K=m((()=>{var t;return null!=(t=e.showTimeout)?t:i.props.showTimeout})),U=m((()=>{var t;return null!=(t=e.hideTimeout)?t:i.props.hideTimeout})),X=e=>{var t,n,a;e||null==(a=null==(n=null==(t=f.value)?void 0:t.popperRef)?void 0:n.popperInstanceRef)||a.destroy()},Q=()=>{"hover"===i.props.menuTrigger&&"horizontal"===i.props.mode||i.props.collapse&&"vertical"===i.props.mode||e.disabled||i.handleSubMenuClick({index:e.index,indexPath:o.value,active:G.value})},ee=(t,n=K.value)=>{var a;"focus"!==t.type&&("click"===i.props.menuTrigger&&"horizontal"===i.props.mode||!i.props.collapse&&"vertical"===i.props.mode||e.disabled?d.mouseInChild.value=!0:(d.mouseInChild.value=!0,null==v||v(),({stop:v}=L((()=>{i.openMenu(e.index,o.value)}),n)),R.value&&(null==(a=s.value.vnode.el)||a.dispatchEvent(new MouseEvent("mouseenter")))))},te=(t=!1)=>{var n;"click"===i.props.menuTrigger&&"horizontal"===i.props.mode||!i.props.collapse&&"vertical"===i.props.mode?d.mouseInChild.value=!1:(null==v||v(),d.mouseInChild.value=!1,({stop:v}=L((()=>!h.value&&i.closeMenu(e.index,o.value)),U.value)),R.value&&t&&(null==(n=d.handleMouseleave)||n.call(d,!0)))};S((()=>i.props.collapse),(e=>X(Boolean(e))));{const e=e=>{c.value[e.index]=e},t=e=>{delete c.value[e.index]};k(`subMenu:${a.uid}`,{addSubMenu:e,removeSubMenu:t,handleMouseleave:te,mouseInChild:h,level:d.level+1})}return n({opened:F}),E((()=>{i.addSubMenu(J),d.addSubMenu(J)})),O((()=>{d.removeSubMenu(J),i.removeSubMenu(J)})),()=>{var n;const l=[null==(n=t.title)?void 0:n.call(t),w($,{class:r.e("icon-arrow"),style:{transform:F.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&i.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>T(W.value)?w(a.appContext.components[W.value]):w(W.value)})],o=i.isMenuPopup?w(N,{ref:f,visible:F.value,effect:"light",pure:!0,offset:Z.value,showArrow:!1,persistent:!0,popperClass:H.value,placement:j.value,teleported:R.value,fallbackPlacements:V.value,transition:q.value,gpuAcceleration:!1},{content:()=>{var e;return w("div",{class:[u.m(D.value),u.m("popup-container"),H.value],onMouseenter:e=>ee(e,100),onMouseleave:()=>te(!0),onFocus:e=>ee(e,100)},[w("ul",{class:[u.b(),u.m("popup"),u.m(`popup-${j.value}`)],style:Y.value},[null==(e=t.default)?void 0:e.call(t)])])},default:()=>w("div",{class:r.e("title"),onClick:Q},l)}):w(A,{},[w("div",{class:r.e("title"),ref:b,onClick:Q},l),w(ae,{},{default:()=>{var e;return P(w("ul",{role:"menu",class:[u.b(),u.m("inline")],style:Y.value},[null==(e=t.default)?void 0:e.call(t)]),[[z,F.value]])}})]);return w("li",{class:[r.b(),r.is("active",G.value),r.is("opened",F.value),r.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:F.value,onMouseenter:ee,onMouseleave:()=>te(),onFocus:ee},[o])}}});const me=b({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:j(Array),default:()=>W([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:f,default:()=>_},popperEffect:{type:j(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),he=e=>J(e)&&e.every((e=>T(e))),be={close:(e,t)=>T(e)&&he(t),open:(e,t)=>T(e)&&he(t),select:(e,t,n,a)=>T(e)&&he(t)&&G(n)&&(void 0===a||a instanceof Promise)};var fe=a({name:"ElMenu",props:me,emits:be,setup(e,{emit:t,slots:n,expose:a}){const o=B(),s=o.appContext.config.globalProperties.$router,u=g(),r=l("menu"),i=l("sub-menu"),d=g(-1),p=g(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),c=g(e.defaultActive),v=g({}),h=g({}),b=m((()=>"horizontal"===e.mode||"vertical"===e.mode&&e.collapse)),f=(n,a)=>{p.value.includes(n)||(e.uniqueOpened&&(p.value=p.value.filter((e=>a.includes(e)))),p.value.push(n),t("open",n,a))},x=e=>{const t=p.value.indexOf(e);-1!==t&&p.value.splice(t,1)},M=(e,n)=>{x(e),t("close",e,n)},I=({index:e,indexPath:t})=>{p.value.includes(e)?M(e,t):f(e,t)},y=n=>{("horizontal"===e.mode||e.collapse)&&(p.value=[]);const{index:a,indexPath:l}=n;if(!D(a)&&!D(l))if(e.router&&s){const e=n.route||a,o=s.push(e).then((e=>(e||(c.value=a),e)));t("select",a,l,{index:a,indexPath:l,route:e},o)}else c.value=a,t("select",a,l,{index:a,indexPath:l})},O=()=>{var e,t;if(!u.value)return-1;const n=Array.from(null!=(t=null==(e=u.value)?void 0:e.childNodes)?t:[]).filter((e=>"#comment"!==e.nodeName&&("#text"!==e.nodeName||e.nodeValue))),a=getComputedStyle(u.value),l=Number.parseInt(a.paddingLeft,10),o=Number.parseInt(a.paddingRight,10),s=u.value.clientWidth-l-o;let r=0,i=0;return n.forEach(((e,t)=>{r+=(e=>{const t=getComputedStyle(e),n=Number.parseInt(t.marginLeft,10),a=Number.parseInt(t.marginRight,10);return e.offsetWidth+n+a||0})(e),r<=s-64&&(i=t+1)})),i===n.length?-1:i};let T=!0;const N=()=>{if(d.value===O())return;const e=()=>{d.value=-1,Y((()=>{d.value=O()}))};T?e():((e,t=33.34)=>{let n;return()=>{n&&clearTimeout(n),n=setTimeout((()=>{e()}),t)}})(e)(),T=!1};let z;S((()=>e.defaultActive),(t=>{v.value[t]||(c.value=""),(t=>{const n=v.value,a=n[t]||c.value&&n[c.value]||n[e.defaultActive];c.value=a?a.index:t})(t)})),S((()=>e.collapse),(e=>{e&&(p.value=[])})),S(v.value,(()=>{const t=c.value&&v.value[c.value];if(!t||"horizontal"===e.mode||e.collapse)return;t.indexPath.forEach((e=>{const t=h.value[e];t&&f(e,t.indexPath)}))})),R((()=>{"horizontal"===e.mode&&e.ellipsis?z=q(u,N).stop:null==z||z()}));const A=g(!1);{const t=e=>{h.value[e.index]=e},n=e=>{delete h.value[e.index]},a=e=>{v.value[e.index]=e},l=e=>{delete v.value[e.index]};k("rootMenu",C({props:e,openedMenus:p,items:v,subMenus:h,activeIndex:c,isMenuPopup:b,addMenuItem:a,removeMenuItem:l,addSubMenu:t,removeSubMenu:n,openMenu:f,closeMenu:M,handleMenuItemClick:y,handleSubMenuClick:I})),k(`subMenu:${o.uid}`,{addSubMenu:t,removeSubMenu:n,mouseInChild:A,level:0})}E((()=>{"horizontal"===e.mode&&new se(o.vnode.el,r.namespace.value)}));a({open:e=>{const{indexPath:t}=h.value[e];t.forEach((e=>f(e,t)))},close:x,handleResize:N});const L=de(e,0);return()=>{var a,l;let o=null!=(l=null==(a=n.default)?void 0:a.call(n))?l:[];const s=[];if("horizontal"===e.mode&&u.value){const t=V(o),n=-1===d.value?t:t.slice(0,d.value),a=-1===d.value?[]:t.slice(d.value);(null==a?void 0:a.length)&&e.ellipsis&&(o=n,s.push(w(ve,{index:"sub-menu-more",class:i.e("hide-arrow"),popperOffset:e.popperOffset},{title:()=>w($,{class:i.e("icon-more")},{default:()=>w(e.ellipsisIcon)}),default:()=>a})))}const c=e.closeOnClickOutside?[[F,()=>{p.value.length&&(A.value||(p.value.forEach((e=>{return t("close",e,(n=e,h.value[n].indexPath));var n})),p.value=[]))}]]:[],v=P(w("ul",{key:String(e.collapse),role:"menubar",ref:u,style:L.value,class:{[r.b()]:!0,[r.m(e.mode)]:!0,[r.m("collapse")]:e.collapse}},[...o,...s]),c);return e.collapseTransition&&"vertical"===e.mode?w(ue,(()=>v)):v}}});const xe=b({index:{type:j([String,null]),default:null},route:{type:j([String,Object])},disabled:Boolean}),Me={click:e=>T(e.index)&&J(e.indexPath)},ge="ElMenuItem";var Ie=n(a({name:ge,components:{ElTooltip:N},props:xe,emits:Me,setup(e,{emit:t}){const n=B(),a=x("rootMenu"),o=l("menu"),s=l("menu-item");a||M(ge,"can not inject root menu");const{parentMenu:u,indexPath:r}=re(n,Z(e,"index")),i=x(`subMenu:${u.value.uid}`);i||M(ge,"can not inject sub menu");const d=m((()=>e.index===a.activeIndex)),p=C({index:e.index,indexPath:r,active:d});return E((()=>{i.addSubMenu(p),a.addMenuItem(p)})),O((()=>{i.removeSubMenu(p),a.removeMenuItem(p)})),{parentMenu:u,rootMenu:a,active:d,nsMenu:o,nsMenuItem:s,handleClick:()=>{e.disabled||(a.handleMenuItemClick({index:e.index,indexPath:r.value,route:e.route}),t("click",p))}}}}),[["render",function(e,t,n,a,l,i){const d=H("el-tooltip");return o(),K("li",{class:X([e.nsMenuItem.b(),e.nsMenuItem.is("active",e.active),e.nsMenuItem.is("disabled",e.disabled)]),role:"menuitem",tabindex:"-1",onClick:e.handleClick},["ElMenu"===e.parentMenu.type.name&&e.rootMenu.props.collapse&&e.$slots.title?(o(),s(d,{key:0,effect:e.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:u((()=>[r(e.$slots,"title")])),default:u((()=>[U("div",{class:X(e.nsMenu.be("tooltip","trigger"))},[r(e.$slots,"default")],2)])),_:3},8,["effect"])):(o(),K(A,{key:1},[r(e.$slots,"default"),r(e.$slots,"title")],64))],10,["onClick"])}],["__file","menu-item.vue"]]);const ye={title:String};var Ce=n(a({name:"ElMenuItemGroup",props:ye,setup:()=>({ns:l("menu-item-group")})}),[["render",function(e,t,n,a,l,s){return o(),K("li",{class:X(e.ns.b())},[U("div",{class:X(e.ns.e("title"))},[e.$slots.title?r(e.$slots,"title",{key:1}):(o(),K(A,{key:0},[Q(ee(e.title),1)],64))],2),U("ul",null,[r(e.$slots,"default")])],2)}],["__file","menu-item-group.vue"]]);const Se=te(fe,{MenuItem:Ie,MenuItemGroup:Ce,SubMenu:ve}),ke=ne(Ie);ne(Ce);const Ee=ne(ve);export{Ee as E,ke as a,Se as b,me as c,Me as d,xe as e,ye as f,be as m,pe as s};
