import{_ as e,f as a,g as l,c as s,a as t,t as o,d as n,w as i,F as u,G as r,v as c,y as d,H as p,I as v,j as A,z as b,o as m,e as y,J as g,K as I,L as h,r as f,M as j,N as k,D as x}from"./index-BdR_P0jW.js";/* empty css                  */import{_ as z}from"./hb3-C1MkjK2N.js";import{E as w}from"./index-BK95h8ww.js";const U={class:"con"},X={class:"phone-register-con"},Y={class:"phone-input"},M={class:"country-no"},V={class:"phone-input validCode-input"},E=["disabled"],R={class:"user-avatar-con"},S=["src"],T={class:"user-avatar-text"},B={class:"dialog-footer"},F=e({__name:"index",setup(e){const F=c().query.userId;document.title="都可道-注册页";const K=a(""),N=l({}),C=a(!1),D=()=>{C.value=!0},O=()=>{W.value.forEach((e=>{e.id===K.value&&Object.assign(N,e)})),C.value=!1},P=a(new RegExp),W=a([]);(async()=>{(await d("/common/mobile_code/list")).forEach((e=>{W.value.push(e)})),W.value.forEach((e=>{"中国"===e.country_name&&(Object.assign(N,e),P.value=new RegExp(N.reg.substring(1).slice(0,-1)),K.value=e.id)}))})();const J=async()=>{if(!L.value)return void p.error("请输入手机号");if(!P.value.test(L.value))return void p.error("请输入正确的手机号");let e={country_code:N.code,mobile:L.value,type:"login"};if(await d("/doukedao/passport/send/sms",e)){p.success("验证码发送成功");let e=60,a=setInterval((()=>{if(0===e)return H.value="获取验证码",void clearInterval(a);H.value=`${e}S`,e--}),1e3)}},Z=async()=>{if(!P.value.test(L.value))return void p.error("请输入正确的手机号");let e={country_code:N.code,mobile:L.value,type:"login",valid_code:q.value,parent_user_id:F};await d("/doukedao/passport/login",e)&&(p.success("注册成功"),v.push("/h5download?userId="+F))},G=l({});(async()=>{let e={user_id:F};const a=await A("/common/user/detail",e);Object.assign(G,a)})();const L=a(""),q=a(""),H=a("获取验证码");return(e,a)=>{const l=f("CaretBottom"),c=b,d=j,p=k,v=x,A=w;return m(),s("div",U,[a[8]||(a[8]=t("img",{src:z,class:"bg"},null,-1)),t("div",X,[t("div",Y,[t("span",{class:"country",onClick:D},o(N.country_name),1),n(c,null,{default:i((()=>[n(l)])),_:1}),a[4]||(a[4]=t("span",{class:"line"},null,-1)),t("span",M,"+"+o(N.code),1),u(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>L.value=e),placeholder:"输入手机号,加入都可道",class:"phone-input-text"},null,512),[[r,L.value]])]),t("div",V,[a[5]||(a[5]=t("img",{class:"phone-input-icon",src:"data:image/png;base64,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"},null,-1)),a[6]||(a[6]=t("span",{class:"line"},null,-1)),u(t("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>q.value=e),placeholder:"输入验证码",class:"phone-input-text validCode-input-text"},null,512),[[r,q.value]]),t("button",{type:"text",class:"validCode-btn",onClick:J,disabled:"获取验证码"!==H.value},o(H.value),9,E)]),t("div",{class:"phone-input register-btn"},[t("button",{class:"btn",onClick:Z},"点击注册")])]),t("div",R,[t("img",{src:G.avatar,class:"user-avatar"},null,8,S),t("span",T,"来自"+o(G.nickname)+"推荐",1)]),n(A,{modelValue:C.value,"onUpdate:modelValue":a[3]||(a[3]=e=>C.value=e),title:"请选择国家：",direction:"btt","lock-scroll":!1,size:"280"},{footer:i((()=>[t("div",B,[n(v,{round:"",style:{width:"200px"},type:"primary",onClick:O},{default:i((()=>a[7]||(a[7]=[y(" 确定")]))),_:1})])])),default:i((()=>[t("div",null,[n(p,{modelValue:K.value,"onUpdate:modelValue":a[2]||(a[2]=e=>K.value=e)},{default:i((()=>[(m(!0),s(g,null,I(W.value,(e=>(m(),h(d,{key:e.id,label:e.country_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-a5d8b809"]]);export{F as default};
