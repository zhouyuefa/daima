import{_ as e,f as t,al as a,R as s,r,o as l,c as p,d as o,w as i,a as d,t as u,L as n,as as c,bR as f,H as m,z as g}from"./index-BdR_P0jW.js";/* empty css                    */import{E as h}from"./index-TSZus3Mb.js";const y={class:""},_=["src"],v={style:{"margin-left":"10px",color:"#f56c6c"}},w=e({__name:"index",props:{modelValue:{default:()=>({}),type:Object},num:{default:1,type:Number},tip:{default:"",type:String},file_type:{default:"",type:String},group:{default:"",type:String},width:{default:"",type:String},height:{default:"",type:String}},emits:["input","update:modelValue"],setup(e,{emit:w}){const x=t(a+"/upload/merchant_file"),S=e,V=t(null),b=w,j=s({get:()=>(e=>{for(let t in e)return!1;return!0})(S.modelValue)?void 0:S.modelValue,set(e){b("update:modelValue",e)}}),k=async e=>{const t=new FormData;t.append("file",e.file),t.append("file_type",e.headers.file_type),t.append("group",e.headers.group);try{const{data:e}=await f.post(x.value,t,{headers:{"Content-Type":"multipart/form-data"}});200===e.code?(b("getPic",e.data),m({type:"success",message:"上传成功"})):500==e.code&&m({type:"error",message:e.msg})}catch(a){throw a}},P=e=>{const t=e.size/1024/1024<2;return t||m.error("上传头像图片大小不能超过 2MB!"),t},z=e=>{e=[e[e.length-1]]};return(e,t)=>{const a=r("Plus"),s=g,f=h;return l(),p("div",y,[o(f,{ref_key:"upload",ref:V,style:c({"--theme-width":S.width,"--theme-height":S.height}),id:"pic-uploader-component",class:"pic-uploader-component",action:x.value,"show-file-list":!1,headers:{group:S.group,file_type:S.file_type},"http-request":k,"before-upload":P,"on-change":z},{tip:i((()=>[d("span",v,u(S.tip),1)])),default:i((()=>[j.value?(l(),p("img",{key:0,src:j.value.file_url,class:"pic"},null,8,_)):(l(),n(s,{key:1,class:"avatar-uploader-icon"},{default:i((()=>[o(a)])),_:1}))])),_:1},8,["style","action","headers"])])}}},[["__scopeId","data-v-ec074a9d"]]);export{w as P};
