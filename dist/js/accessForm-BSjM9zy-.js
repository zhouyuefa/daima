import{a6 as e,a7 as a,R as l,f as s,h as d,j as t,g as o,o as u,c as i,d as m,w as c,e as n,L as r,P as p,i as _,J as f,ak as V,H as v,B as b,A as j,M as h,N as y,z as U,D as k,E as x,aa as g}from"./index-BdR_P0jW.js";/* empty css                *//* empty css                       */import{i as w}from"./index-C81ng_c9.js";import{E as O}from"./index-DTPeqqvl.js";/* empty css                */import"./index-C5ggMqbd.js";import"./index-D1LW7kyL.js";import"./index-SLBSEZ_O.js";const z={__name:"accessForm",props:e({data:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:e(["submit"],["update:modelValue"]),setup(e,{emit:z}){const C=a(e,"modelValue"),D=z,E=e,M=l((()=>(E.data.access_id?"编辑":"新增")+"菜单与权限")),R=l((()=>E.data.access_id)),A=s(!1);d(C,(async e=>{if(!e)return void J(H);const a=R.value??0,l=await t("/admin/access/edit/"+a);if(!l)return;const{access:s,access_list:d}=l||{};J(H),Object.assign(H,s),E.data.parent_access_id&&Object.assign(H,E.data),F.value=[{access_name:"一级菜单",access_id:0,children:[]},...d]}));const B=s(null),F=s([]),H=o({sort:100}),J=e=>{for(const a of Object.keys(e))delete e[a];H.sort=100,H.is_menu=1},L=e=>{H.menu_icon=e.name},N=async()=>{await V("/admin/access/edit",H)&&(v.success("编辑成功"),D("submit"),C.value=!1)};return(e,a)=>{const l=O,s=b,d=j,t=h,o=y,V=U,v=k,z=x,D=g;return u(),i(f,null,[m(D,{modelValue:C.value,"onUpdate:modelValue":a[8]||(a[8]=e=>C.value=e),title:M.value,width:"420",top:"20vh",class:"form-dialog","close-on-click-modal":!1},{default:c((()=>[m(z,{ref_key:"formDataRef",ref:B,model:H,"label-width":"auto"},{default:c((()=>[m(s,{label:"上级权限",prop:"parent_access_id"},{default:c((()=>[m(l,{modelValue:H.parent_access_id,"onUpdate:modelValue":a[0]||(a[0]=e=>H.parent_access_id=e),data:F.value,"check-strictly":"",props:{label:"access_name",value:"access_id",children:"children"}},null,8,["modelValue","data"])])),_:1}),m(s,{label:"名称",prop:"access_name"},{default:c((()=>[m(d,{modelValue:H.access_name,"onUpdate:modelValue":a[1]||(a[1]=e=>H.access_name=e)},null,8,["modelValue"])])),_:1}),m(s,{label:"Uri",prop:"uri"},{default:c((()=>[m(d,{modelValue:H.uri,"onUpdate:modelValue":a[2]||(a[2]=e=>H.uri=e)},null,8,["modelValue"])])),_:1}),m(s,{label:"参数",prop:"params"},{default:c((()=>[m(d,{modelValue:H.params,"onUpdate:modelValue":a[3]||(a[3]=e=>H.params=e)},null,8,["modelValue"])])),_:1}),m(s,{label:"排序",prop:"sort"},{default:c((()=>[m(d,{modelValue:H.sort,"onUpdate:modelValue":a[4]||(a[4]=e=>H.sort=e),type:"number"},null,8,["modelValue"])])),_:1}),m(s,{label:"是否菜单",prop:"is_menu"},{default:c((()=>[m(o,{modelValue:H.is_menu,"onUpdate:modelValue":a[5]||(a[5]=e=>H.is_menu=e)},{default:c((()=>[m(t,{value:1},{default:c((()=>a[10]||(a[10]=[n("菜单")]))),_:1}),m(t,{value:0},{default:c((()=>a[11]||(a[11]=[n("仅权限")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),m(s,{label:"是否隐藏",prop:"is_hide"},{default:c((()=>[m(o,{modelValue:H.is_hide,"onUpdate:modelValue":a[6]||(a[6]=e=>H.is_hide=e)},{default:c((()=>[m(t,{value:2},{default:c((()=>a[12]||(a[12]=[n("是")]))),_:1}),m(t,{value:1},{default:c((()=>a[13]||(a[13]=[n("否")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),m(s,{label:"菜单图标",prop:"menu_icon"},{default:c((()=>[H.menu_icon?(u(),r(V,{key:0,size:"18",class:"mr5"},{default:c((()=>[(u(),r(p(H.menu_icon)))])),_:1})):_("",!0),m(v,{size:"small",onClick:a[7]||(a[7]=e=>A.value=!0)},{default:c((()=>a[14]||(a[14]=[n("选择图标")]))),_:1})])),_:1}),m(s,{class:"text-right"},{default:c((()=>[m(v,{type:"primary",onClick:N},{default:c((()=>a[15]||(a[15]=[n("立即修改")]))),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),A.value?(u(),r(w,{key:0,modelValue:A.value,"onUpdate:modelValue":a[9]||(a[9]=e=>A.value=e),onSelect:L},null,8,["modelValue"])):_("",!0)],64)}}};export{z as default};
