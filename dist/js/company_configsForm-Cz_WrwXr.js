import{a6 as a,a7 as e,R as l,f as t,h as s,j as u,o as d,L as o,w as r,d as n,a as m,e as i,y as p,H as _,bQ as c,B as v,D as f,E as V,aa as y}from"./index-BdR_P0jW.js";const b={__name:"company_configsForm",props:a({data:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:a(["submit"],["update:modelValue"]),setup(a,{emit:b}){const x=e(a,"modelValue"),g=b,U=a,h=l((()=>"配置"+(U.data.id?"详情":"新增"))),w=l((()=>U.data.id)),j=t(null),k=t({});s(x,(async a=>{if(!a)return void(k.value={});const e=w.value??0,l=await u("/admin/admin_configs/edit/"+e);k.value=l.info||{};for(const t of["company_rate","driver_rate","star_1","star_3","star_5"])k.value[t]=100*parseFloat(k.value[t])}));const D=async()=>{await p("/admin/admin_configs/edit",k.value)&&(_.success("修改成功"),x.value=!1,g("submit"))};return(a,e)=>{const l=c,t=v,s=f,u=V,p=y;return d(),o(p,{modelValue:x.value,"onUpdate:modelValue":e[6]||(e[6]=a=>x.value=a),title:h.value,width:"420",top:"20vh",class:"form-dialog"},{default:r((()=>[n(u,{ref_key:"configDataRef",ref:j,model:k.value,"label-width":"auto"},{default:r((()=>[n(t,{label:"公司分成比例",prop:"company_rate",class:"flex"},{default:r((()=>[n(l,{modelValue:k.value.company_rate,"onUpdate:modelValue":e[0]||(e[0]=a=>k.value.company_rate=a),step:1,"step-strictly":"",min:0,max:100},null,8,["modelValue"]),e[7]||(e[7]=m("span",null,"  %",-1))])),_:1}),n(t,{label:"司机分成比例",prop:"driver_rate"},{default:r((()=>[n(l,{modelValue:k.value.driver_rate,"onUpdate:modelValue":e[1]||(e[1]=a=>k.value.driver_rate=a),step:1,"step-strictly":"",min:0,max:100,disabled:!0},null,8,["modelValue"]),e[8]||(e[8]=m("span",null,"  %",-1))])),_:1}),n(t,{label:"不满意分成比例",prop:"star_1"},{default:r((()=>[n(l,{modelValue:k.value.star_1,"onUpdate:modelValue":e[2]||(e[2]=a=>k.value.star_1=a),step:1,"step-strictly":"",min:0,max:100},null,8,["modelValue"]),e[9]||(e[9]=m("span",null,"  %",-1))])),_:1}),n(t,{label:"满意分成比例",prop:"star_3"},{default:r((()=>[n(l,{modelValue:k.value.star_3,"onUpdate:modelValue":e[3]||(e[3]=a=>k.value.star_3=a),step:1,"step-strictly":"",min:0,max:100},null,8,["modelValue"]),e[10]||(e[10]=m("span",null,"  %",-1))])),_:1}),n(t,{label:"超预期分成比例",prop:"star_5"},{default:r((()=>[n(l,{modelValue:k.value.star_5,"onUpdate:modelValue":e[4]||(e[4]=a=>k.value.star_5=a),step:1,"step-strictly":"",min:0,max:100},null,8,["modelValue"]),e[11]||(e[11]=m("span",null,"  %",-1))])),_:1}),n(t,{class:"text-right"},{default:r((()=>[n(s,{type:"primary",onClick:e[5]||(e[5]=a=>(async a=>{a&&a.validate((a=>{a&&D()}))})(j.value))},{default:r((()=>e[12]||(e[12]=[i(" 立即修改 ")]))),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])}}};export{b as default};
