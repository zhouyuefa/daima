import{f as e,av as a,y as l,g as t,T as s,S as n,r as o,o as r,c as i,a as p,d as u,w as d,aw as h}from"./index-BdR_P0jW.js";/* empty css                */import c from"./shopCheckForm-DFKoG9z-.js";import{E as b}from"./index-C5CR2e01.js";const g={class:"boxElMain"},v={class:"box boxFlex"},y={__name:"index",setup(y){const m=e({getList:"/admin/version/get_list",exportExcel:"/info/loginLog/export"}),w=e([{label:"都可道",value:"1"},{label:"U+",value:"2"}]),x=e([{label:"IOS",value:"1"},{label:"安卓",value:"2"}]),f=e([{label:"禁用",value:"1"},{label:"启用",value:"2"}]),_=e([{type:"Select",label:"应用所属",prop:"app_type",placeholder:"请选择",options:w,width:"280px"},{type:"Select",label:"应用类型",prop:"system_type",width:"280px",options:x,placeholder:"请选择"},{type:"Input",label:"版本号",prop:"version",width:"280px",placeholder:"请输入版本号",maxlength:20},{type:"Select",label:"状态",prop:"status",width:"280px",options:f,placeholder:"请输入登录人名称"}]),C=e({belong:"",type:"",build:"",status:""}),S=e([{label:"查 询",icon:"Search",handle:()=>P()},{label:"重置",handle:()=>k()},{label:"排序",popover:!0}]),H=e([{label:"新增",icon:"Plus",handle:()=>L()}]),j=e([]),E=e({pageCurrent:1,pageSize:20,totalPages:0,params:{}}),O=e([{label:"应用所属",prop:"app_type",align:"center",type:"string",width:"200",show:!0,codeType:w,formatter:(e,a,l)=>D(e,a,l)},{label:"应用类型",prop:"system_type",align:"center",type:"string",width:"150",show:!0,codeType:x,formatter:(e,a,l)=>D(e,a,l)},{label:"版本号",prop:"version",align:"center",type:"string",width:"120",show:!0},{label:"build",prop:"build",align:"center",type:"string",width:"120",show:!0},{label:"版本描述",prop:"context",align:"center",type:"string",width:"170",show:!0},{label:"安装包下载地址",prop:"path",align:"center",type:"string",width:"170",show:!0},{label:"状态",prop:"status_text",align:"center",type:"string",width:"110",show:!0},{label:"操作",minwidth:"160",type:"button",show:!0,fixed:"right",align:"center",btnList:[{label:"编辑",type:"primary",auth:"['admin/version/detail']",handle:(e,a,l,t,s)=>T(e,a)}]}]),D=(e,a,l)=>{if("app_type"===e||"system_type"===e){let t="";return l.forEach((l=>{l.value===a[e]&&(t=l.label)})),t}},P=()=>{E.pageCurrent=1,R()},T=(e,a,l,t,s)=>{(e=>{for(const a of Object.keys(e))delete e[a]})(V),Object.assign(V,a),F.value=!0},k=()=>{a.clearObj(C),E.pageCurrent=1,R()},F=e(!1),L=()=>{F.value=!0},R=async e=>{E.value=e;const a=await l(m.value.getList,{...E.value,...C.value});if(a&&(j.value=[],E.value=(null==a?void 0:a.page)||{},j.value.splice(0),a.list.length>0))for(let l=0;l<a.list.length;l++){let e=a.list[l];j.value.push(e)}},V=t({});return s.on("getCheckData",(e=>{(e=>{const a=[];e.list.forEach((e=>{a.push(e.label)})),O.value.sort(((e,l)=>"操作"===e.label?1:a.indexOf(e.label)-a.indexOf(l.label))),O.value=O.value.map((a=>e.data.includes(a.label)||"操作"===a.label?{...a,show:!0}:{...a,show:!1}))})(e)})),n((()=>{R()})),(e,a)=>{const l=h,t=o("cusTable"),s=b;return r(),i("div",g,[p("div",v,[u(s,null,{default:d((()=>[u(l,{searchForm:_.value,searchData:C.value,searchHandleRight:H.value,searchHandle:S.value,tableCols:O.value,onHandleEnterSearch:P,onHandleReset:k},null,8,["searchForm","searchData","searchHandleRight","searchHandle","tableCols"]),u(t,{ref:"cusTable",height:"calc(100vh - 240px)","row-key":"test_admin_user_id",isPagination:!0,isHandle:!0,tableCols:O.value,tableData:j.value,tablePage:E.value,onHandleCurrentChange:R},null,8,["tableCols","tableData","tablePage"])])),_:1})]),u(c,{modelValue:F.value,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value=e),data:V,onSubmit:a[1]||(a[1]=e=>{R()})},null,8,["modelValue","data"])])}}};export{y as default};
