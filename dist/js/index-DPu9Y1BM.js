import{_ as a,f as e,g as l,a1 as t,o as i,c as r,d,w as n,a as p,J as s,K as o,L as u,e as _,t as m,l as c,y as w,j as h,ad as v,ae as g,am as b,D as f,a3 as y,a4 as z,a5 as x}from"./index-BdR_P0jW.js";/* empty css                */import V from"./company_billsForm-CRyV6Hnl.js";import{E as N}from"./index-C5ggMqbd.js";const j={class:"mb20"},T=a(Object.assign({name:"company/company_bills/index"},{__name:"index",setup(a){const T=e([]),C=e([]),D=e(!1),U=l({}),k=e({admin_user_id:"",created_at:[]}),Y=t({all:"全部",1:"收入",2:"提现",3:"退款",4:"账单"}),S=e({page:1,page_size:20,total:0}),H=async()=>{const a=await w("/admin/company_bills/index/lists",{admin_user_id:k.value.admin_user_id,created_at:k.value.created_at,page:S.value.page,page_size:S.value.page_size});a&&(T.value=(null==a?void 0:a.lists.list)||[],S.value=(null==a?void 0:a.lists.page)||{})},J=async()=>{const a=await h("/admin/companies/index/lists",{page:S.value.page,page_size:1e3});a&&(C.value=[{admin_user_id:" ",real_name:"全部"}].concat(a.lists.list))},M=a=>{S.value.page_size=a,H()},A=a=>{S.value.page=a,H()},E=async()=>{H()};return(async()=>{H(),J()})(),(a,e)=>{const l=v,t=g,w=b,h=f,J=y,F=z,I=x,K=N;return i(),r("div",null,[d(K,null,{header:n((()=>e[6]||(e[6]=[p("span",null,"公司流水",-1)]))),default:n((()=>[p("div",j,[d(t,{modelValue:k.value.admin_user_id,"onUpdate:modelValue":e[0]||(e[0]=a=>k.value.admin_user_id=a),placeholder:"汽车公司",style:{width:"280px"}},{default:n((()=>[(i(!0),r(s,null,o(C.value,(a=>(i(),u(l,{key:a.admin_user_id,label:a.real_name,value:a.admin_user_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),d(w,{class:"ml30",modelValue:k.value.created_at,"onUpdate:modelValue":e[1]||(e[1]=a=>k.value.created_at=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)]},null,8,["modelValue","default-time"]),d(h,{class:"ml30",type:"primary",onClick:e[2]||(e[2]=a=>(S.value.page=1,void H()))},{default:n((()=>e[7]||(e[7]=[_("查询")]))),_:1})]),d(F,{data:T.value,"row-key":"id","default-expand-all":"",class:"mt5"},{default:n((()=>[d(J,{prop:"real_name",label:"公司名称","min-width":"10",width:"160"}),d(J,{prop:"bill_no",label:"流水单号","min-width":"10",width:"200"}),d(J,{prop:"order_car.order_no",label:"订单号","min-width":"10",width:"200"}),d(J,{prop:"type",label:"类型","min-width":"10",width:"80"},{default:n((({row:a})=>[p("span",null,m(c(Y)[a.type]?c(Y)[a.type]:"--"),1)])),_:1}),d(J,{prop:"order_car.total_price",label:"订单金额(TN)","min-width":"10",width:"120"},{default:n((({row:a})=>{var e;return[p("span",null,m((null==(e=a.order_car)?void 0:e.total_price)??0),1)]})),_:1}),d(J,{prop:"order_car.tax_price",label:"消费税金额(TN)","min-width":"10",width:"120"},{default:n((({row:a})=>{var e;return[p("span",null,m((null==(e=a.order_car)?void 0:e.tax_price)??0),1)]})),_:1}),d(J,{prop:"plate_rate",label:"平台分成比例","min-width":"10",width:"120"},{default:n((({row:a})=>[p("span",null,m(a.plate_rate)+"%",1)])),_:1}),d(J,{prop:"plate_price",label:"平台结算金额(TN)","min-width":"10",width:"130"},{default:n((({row:a})=>[p("span",null,m(a.plate_price??0),1)])),_:1}),d(J,{prop:"company_rate",label:"汽车公司分成比例","min-width":"10",width:"130"},{default:n((({row:a})=>[p("span",null,m(a.company_rate)+"%",1)])),_:1}),d(J,{prop:"price",label:"汽车公司应结算金额(TN)","min-width":"10",width:"180"}),d(J,{prop:"profit_rate",label:"汽车公司净利分成比例","min-width":"10",width:"160"},{default:n((({row:a})=>[p("span",null,m(a.profit_rate)+"%",1)])),_:1}),d(J,{prop:"profit",label:"汽车公司本单净利润(TN)","min-width":"10",width:"180"}),d(J,{prop:"driver_rate",label:"司机净利分成比例","min-width":"10",width:"140"},{default:n((({row:a})=>[p("span",null,m(a.driver_rate)+"%",1)])),_:1}),d(J,{prop:"comment_rate",label:"司机评价比例","min-width":"10",width:"110"},{default:n((({row:a})=>[p("span",null,m(a.comment_rate)+"%",1)])),_:1}),d(J,{prop:"driver_price",label:"司机实际收入(TN)","min-width":"10",width:"130"}),d(J,{prop:"freeze_after",label:"WACN冻结金额(TN)","min-width":"10",width:"150"}),d(J,{prop:"created_at",label:"创建时间","min-width":"10",width:"160"})])),_:1},8,["data"]),d(I,{background:"",layout:"total, sizes, prev, pager, next, ->,jumper","current-page":S.value.page,"onUpdate:currentPage":e[3]||(e[3]=a=>S.value.page=a),"page-size":S.value.page_size,"onUpdate:pageSize":e[4]||(e[4]=a=>S.value.page_size=a),total:S.value.total,class:"ml10 mt10",onSizeChange:M,onCurrentChange:A},null,8,["current-page","page-size","total"])])),_:1}),d(V,{modelValue:D.value,"onUpdate:modelValue":e[5]||(e[5]=a=>D.value=a),data:U,onSubmit:E},null,8,["modelValue","data"])])}}}),[["__scopeId","data-v-c5b0dc21"]]);export{T as default};
