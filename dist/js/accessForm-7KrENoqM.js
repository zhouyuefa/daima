import{a6 as e,a7 as a,R as l,f as s,h as t,j as o,g as d,o as u,c as m,d as c,w as i,e as n,L as r,P as p,i as _,J as f,ak as V,H as v,B as b,A as j,M as y,N as h,z as k,D as U,E as x,aa as w}from"./index-BdR_P0jW.js";/* empty css                *//* empty css                       */import{i as g}from"./index-C81ng_c9.js";import{E as z}from"./index-DTPeqqvl.js";/* empty css                */import"./index-C5ggMqbd.js";import"./index-D1LW7kyL.js";import"./index-SLBSEZ_O.js";const O={__name:"accessForm",props:e({data:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:e(["submit"],["update:modelValue"]),setup(e,{emit:O}){const C=a(e,"modelValue"),D=O,E=e,M=l((()=>(E.data.access_id?"编辑":"新增")+"菜单与权限")),R=l((()=>E.data.access_id)),A=s(!1);t(C,(async e=>{if(!e)return void J(H);const a=R.value??0,l=await o("/admin/access/edit/"+a);if(!l)return;const{access:s,access_list:t}=l||{};J(H),Object.assign(H,s),F.value=[{access_name:"一级菜单",access_id:0,children:[]},...t]}));const B=s(null),F=s([]),H=d({sort:100}),J=e=>{for(const a of Object.keys(e))delete e[a];H.sort=100,H.is_menu=1},L=e=>{H.menu_icon=e.name},N=async()=>{await V("/admin/access/edit",H)&&(v.success("编辑成功"),D("submit"),C.value=!1)};return(e,a)=>{const l=z,s=b,t=j,o=y,d=h,V=k,v=U,O=x,D=w;return u(),m(f,null,[c(D,{modelValue:C.value,"onUpdate:modelValue":a[7]||(a[7]=e=>C.value=e),title:M.value,width:"420",top:"20vh",class:"form-dialog","close-on-click-modal":!1},{default:i((()=>[c(O,{ref_key:"formDataRef",ref:B,model:H,"label-width":"auto"},{default:i((()=>[c(s,{label:"上级权限",prop:"parent_access_id"},{default:i((()=>[c(l,{modelValue:H.parent_access_id,"onUpdate:modelValue":a[0]||(a[0]=e=>H.parent_access_id=e),data:F.value,"check-strictly":"",props:{label:"access_name",value:"access_id",children:"children"}},null,8,["modelValue","data"])])),_:1}),c(s,{label:"名称",prop:"access_name"},{default:i((()=>[c(t,{modelValue:H.access_name,"onUpdate:modelValue":a[1]||(a[1]=e=>H.access_name=e)},null,8,["modelValue"])])),_:1}),c(s,{label:"Uri",prop:"uri"},{default:i((()=>[c(t,{modelValue:H.uri,"onUpdate:modelValue":a[2]||(a[2]=e=>H.uri=e)},null,8,["modelValue"])])),_:1}),c(s,{label:"参数",prop:"params"},{default:i((()=>[c(t,{modelValue:H.params,"onUpdate:modelValue":a[3]||(a[3]=e=>H.params=e)},null,8,["modelValue"])])),_:1}),c(s,{label:"排序",prop:"sort"},{default:i((()=>[c(t,{modelValue:H.sort,"onUpdate:modelValue":a[4]||(a[4]=e=>H.sort=e),type:"number"},null,8,["modelValue"])])),_:1}),c(s,{label:"是否菜单",prop:"is_menu"},{default:i((()=>[c(d,{modelValue:H.is_menu,"onUpdate:modelValue":a[5]||(a[5]=e=>H.is_menu=e)},{default:i((()=>[c(o,{value:1},{default:i((()=>a[9]||(a[9]=[n("菜单")]))),_:1}),c(o,{value:0},{default:i((()=>a[10]||(a[10]=[n("仅权限")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),c(s,{label:"菜单图标",prop:"menu_icon"},{default:i((()=>[H.menu_icon?(u(),r(V,{key:0,size:"18",class:"mr5"},{default:i((()=>[(u(),r(p(H.menu_icon)))])),_:1})):_("",!0),c(v,{size:"small",onClick:a[6]||(a[6]=e=>A.value=!0)},{default:i((()=>a[11]||(a[11]=[n("选择图标")]))),_:1})])),_:1}),c(s,{class:"text-right"},{default:i((()=>[c(v,{type:"primary",onClick:N},{default:i((()=>a[12]||(a[12]=[n("立即修改")]))),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),A.value?(u(),r(g,{key:0,modelValue:A.value,"onUpdate:modelValue":a[8]||(a[8]=e=>A.value=e),onSelect:L},null,8,["modelValue"])):_("",!0)],64)}}};export{O as default};
