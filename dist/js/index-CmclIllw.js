import{_ as e,R as l,h as a,f as t,j as u,g as d,r,o,c as i,d as n,w as s,a as m,t as p,bW as g,bX as _,J as c,K as b,L as f,e as V,aJ as v,i as h,an as y,y as x,z as w,A as k,B as U,a8 as q,au as j,ad as C,ae as D,D as O,M as S,N as A,a9 as M,E as P}from"./index-BdR_P0jW.js";/* empty css                */import{_ as R,T as z}from"./index-PFFTJ-rA.js";import{P as E}from"./index-DIDL6cCO.js";import{E as L}from"./index-C5ggMqbd.js";/* empty css                    */import"./index-TSZus3Mb.js";const I={class:"app-container"},J={style:{"margin-bottom":"20px","font-size":"20px"}},T={style:{"vertical-align":"2px","padding-left":"20px"}},W=y({name:"localLife/addShopPage/index"}),B=e(Object.assign(W,{props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"新增商户"},selectedRowData:{type:Object,default:()=>({id:"0000000"})}},emits:["commit","closeAddPage"],setup(e,{emit:y}){const W=y,B=e,F=l((()=>B.selectedRowData.id));a(F,(async e=>{e&&B.modelValue&&(K(),Y(B.selectedRowData.province),N.value=!0)}));const N=t(!1),G=e=>{var l;for(const a of Object.keys(e))delete e[a];null==(l=null==ee?void 0:ee.value)||l.clearValidate()};a((()=>B.modelValue),(async e=>{e&&!F.value?(G($),N.value=!0):e||(N.value=!1)}));const K=()=>{let e=JSON.parse(JSON.stringify(B.selectedRowData));e.logo_img=e.logo_img_url||{},e.banner_img=e.banner_img_url||[],e.material_img=e.material_img_url||[],Object.assign($,e)},X=()=>{G($),W("closeAddPage")},Z=()=>{ee.value.validate((e=>{if(!e)return!1;W("closeAddPage",$)}))},H=t([]);(async()=>{const e=await u("/admin/area_jp/index/list",{parent_code:0});H.value=e||[]})();const Q=t([]),Y=async e=>{const l=await u("/admin/area_jp/index/list",{parent_code:e});Q.value=l||[]},$=d({}),ee=t(null),le=t({xl:8,lg:8,md:12,sm:24,xs:24}),ae=t({xl:10,lg:12,md:12,sm:24,xs:24}),te=t({name:[{required:!0,message:"请输入商户名称",trigger:"blur"}],merchant_type:[{required:!0,message:"请选择商户类型",trigger:"change"}],subtitle:[{required:!0,message:"请输入副标题",trigger:"blur"}],mobile:[{required:!0,message:"请输入服务电话",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],province:[{required:!0,message:"请选择都道府县",trigger:"change"}],city:[{required:!0,message:"请选择市区町村",trigger:"change"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],lnglat:[{required:!0,message:"请输入经纬度",trigger:"blur"}],account_name:[{required:!0,message:"请输入公司全称/账户名",trigger:"blur"}],account_number:[{required:!0,message:"请输入银行账户",trigger:"blur"}],bank_type:[{required:!0,message:"请选择账户类型",trigger:"change"}],account_bank:[{required:!0,message:"请输入开户银行",trigger:"blur"}],branch:[{required:!0,message:"请输入支店",trigger:"blur"}],swift_code:[{required:!0,message:"请输入SWIFT CODE",trigger:"blur"}],logo_img:[{required:!0,message:"请选择商户封面图",trigger:"change"}],banner_img:[{required:!0,message:"请选择商户轮播图",trigger:"change"}],banner_img:[{required:!0,message:"请选择商户轮播图",trigger:"change"}],material_img:[{required:!0,message:"请选择资质材料",trigger:"change"}],description:[{required:!0,message:"请输入商户详情",trigger:"blur"}],login_name:[{required:!0,message:"请输入商户登录账号",trigger:"blur"}],login_password:[{required:!0,message:"请输入商户登录密码",trigger:"blur"}],user_id:[{required:!0,message:"请输入商户用户端账号",trigger:"blur"}]}),ue=e=>{(e=>{for(let l in e)return!1;return!0})(e)||($.logo_img=e,$.logo_img_url=e)},de=e=>{e.length>0&&($.banner_img=e,$.banner_img_url=e)},re=e=>{e.length>0&&($.material_img=e,$.material_img_url=e)},oe=t([]);(async()=>{const e=await x("/admin/merchant/type/tree_list");oe.value=(null==e?void 0:e.map((e=>{var l;return(null==(l=e.children)?void 0:l.length)>0&&(e.children=e.children.map((e=>({value:e.key,label:e.name})))),{value:e.key,label:e.name,children:e.children}})))||[]})();const ie=t([]),ne=()=>window.open("https://api.map.baidu.com/lbsapi/getpoint/index.html"),se=t(!1),me=async e=>{if(e){se.value=!0;let l={page:1,page_size:999,mobile:e,status:1};const a=await x("/admin/users/index/lists",l);a&&(se.value=!1,ie.value=a.lists.list.map((e=>({value:e.id,label:e.mobile+" / "+e.nickname}))))}else ie.value=[]};return(l,a)=>{const t=r("DArrowLeft"),u=w,d=k,y=U,x=q,W=j,B=C,F=D,N=r("AddLocation"),G=O,K=S,pe=A,ge=M,_e=P,ce=L;return o(),i("div",I,[n(ce,{bordered:!1},{default:s((()=>[m("p",J,[n(u,{style:{"font-size":"16px",cursor:"pointer"},onClick:X},{default:s((()=>[n(t)])),_:1}),m("span",{style:{"vertical-align":"3px","font-size":"16px",cursor:"pointer"},onClick:X},"返回"),m("span",T,p(e.title),1)]),n(_e,{ref_key:"formValidateRef",ref:ee,rules:te.value,model:$,"label-width":"140px"},{default:s((()=>[n(ge,{gutter:24},{default:s((()=>[n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"商户名称：",prop:"name"},{default:s((()=>[n(d,{modelValue:$.name,"onUpdate:modelValue":a[0]||(a[0]=e=>$.name=e),placeholder:"请输入商户名称"},null,8,["modelValue"])])),_:1})])),_:1},16),n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"商户分类：",prop:"merchant_type"},{default:s((()=>[n(W,{modelValue:$.merchant_type,"onUpdate:modelValue":a[1]||(a[1]=e=>$.merchant_type=e),"show-all-levels":!1,style:{width:"100%"},options:oe.value},null,8,["modelValue","options"])])),_:1})])),_:1},16),n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"副标题：",prop:"subtitle"},{default:s((()=>[n(d,{modelValue:$.subtitle,"onUpdate:modelValue":a[2]||(a[2]=e=>$.subtitle=e),placeholder:"请输入副标题"},null,8,["modelValue"])])),_:1})])),_:1},16),n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"服务电话：",prop:"mobile"},{default:s((()=>[n(d,{modelValue:$.mobile,"onUpdate:modelValue":a[3]||(a[3]=e=>$.mobile=e),placeholder:"请输入服务电话"},null,8,["modelValue"])])),_:1})])),_:1},16),n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"都道府县：",prop:"province"},{default:s((()=>[n(F,{modelValue:$.province,"onUpdate:modelValue":a[4]||(a[4]=e=>$.province=e),filterable:"",clearable:"",onChange:a[5]||(a[5]=e=>Y($.province))},{default:s((()=>[(o(!0),i(c,null,b(H.value,(e=>(o(),f(B,{value:e.area_code,key:e.area_code,label:e.area_name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},16),n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"市区町村：",prop:"city"},{default:s((()=>[n(F,{modelValue:$.city,"onUpdate:modelValue":a[6]||(a[6]=e=>$.city=e),filterable:"",clearable:""},{default:s((()=>[(o(!0),i(c,null,b(Q.value,(e=>(o(),f(B,{value:e.area_code,key:e.area_code,label:e.area_name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},16),n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"详细地址：",prop:"address"},{default:s((()=>[n(d,{modelValue:$.address,"onUpdate:modelValue":a[7]||(a[7]=e=>$.address=e),type:"input",placeholder:"请输入详细地址"},null,8,["modelValue"])])),_:1})])),_:1},16),n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"经纬度：",prop:"lnglat"},{default:s((()=>[n(d,{modelValue:$.lnglat,"onUpdate:modelValue":a[8]||(a[8]=e=>$.lnglat=e),style:{width:"calc(100% - 200px)"},placeholder:"请输入经纬度"},null,8,["modelValue"]),n(G,{style:{width:"180px","margin-left":"10px"},onClick:ne,type:"primary",link:""},{default:s((()=>[n(u,null,{default:s((()=>[n(N)])),_:1}),a[23]||(a[23]=V(" 获取经纬度 "))])),_:1})])),_:1})])),_:1},16),n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"公司全称/账户名：",prop:"account_name"},{default:s((()=>[n(d,{modelValue:$.account_name,"onUpdate:modelValue":a[9]||(a[9]=e=>$.account_name=e),type:"input",placeholder:"请输入公司全称/账户名"},null,8,["modelValue"])])),_:1})])),_:1},16),n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"银行账号：",prop:"account_number"},{default:s((()=>[n(d,{modelValue:$.account_number,"onUpdate:modelValue":a[10]||(a[10]=e=>$.account_number=e),type:"input",placeholder:"请输入银行账号"},null,8,["modelValue"])])),_:1})])),_:1},16),n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"账号类型：",prop:"bank_type"},{default:s((()=>[n(pe,{modelValue:$.bank_type,"onUpdate:modelValue":a[11]||(a[11]=e=>$.bank_type=e)},{default:s((()=>[n(K,{value:1,label:"企业"}),n(K,{value:2,label:"个人"})])),_:1},8,["modelValue"])])),_:1})])),_:1},16),n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"开户银行：",prop:"account_bank"},{default:s((()=>[n(d,{modelValue:$.account_bank,"onUpdate:modelValue":a[12]||(a[12]=e=>$.account_bank=e),type:"input",placeholder:"请输入开户银行"},null,8,["modelValue"])])),_:1})])),_:1},16),n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"支店：",prop:"branch"},{default:s((()=>[n(d,{modelValue:$.branch,"onUpdate:modelValue":a[13]||(a[13]=e=>$.branch=e),type:"input",placeholder:"请输入支店"},null,8,["modelValue"])])),_:1})])),_:1},16),n(x,g(_(ae.value)),{default:s((()=>[n(y,{label:"SWIFT CODE：",prop:"swift_code"},{default:s((()=>[n(d,{modelValue:$.swift_code,"onUpdate:modelValue":a[14]||(a[14]=e=>$.swift_code=e),type:"input",placeholder:"请输入SWIFT CODE"},null,8,["modelValue"])])),_:1})])),_:1},16),n(x,{span:24},{default:s((()=>[n(y,{label:"商户封面图：",prop:"logo_img"},{default:s((()=>[n(E,{modelValue:$.logo_img,"onUpdate:modelValue":a[15]||(a[15]=e=>$.logo_img=e),onGetPic:ue,group:"merLogo",tip:"图片大小不超过2M，最多上传1张，比例大小1:1",file_type:"image",num:1,width:"150px",height:"150px"},null,8,["modelValue"])])),_:1})])),_:1}),n(x,{span:24},{default:s((()=>[n(y,{label:"商户轮播图：",prop:"banner_img"},{default:s((()=>[n(R,{modelValue:$.banner_img,"onUpdate:modelValue":a[16]||(a[16]=e=>$.banner_img=e),tip:"图片大小不超过2M，最多上传5张，比例大小4:3",group:"merBanner",file_type:"image",onMulpicUpload:de,num:5,width:"200px",height:"150px"},null,8,["modelValue"])])),_:1})])),_:1}),n(x,{span:24},{default:s((()=>[n(y,{label:"资质材料：",prop:"material_img"},{default:s((()=>[n(R,{modelValue:$.material_img,"onUpdate:modelValue":a[17]||(a[17]=e=>$.material_img=e),group:"material",file_type:"image",tip:"图片大小不超过2M，最多上传5张",onMulpicUpload:re,num:5,width:"150px",height:"150px"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),n(ge,null,{default:s((()=>[n(x,{span:24},{default:s((()=>[n(y,{label:"商户详情：",prop:"description"},{default:s((()=>[n(z,{modelValue:$.description,"onUpdate:modelValue":a[18]||(a[18]=e=>$.description=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),n(ge,null,{default:s((()=>[n(x,g(_(le.value)),{default:s((()=>[n(y,{label:"登录账号：",prop:"login_name"},{default:s((()=>[n(d,{modelValue:$.login_name,"onUpdate:modelValue":a[19]||(a[19]=e=>$.login_name=e),disabled:"新增商户"!==e.title,placeholder:"请输入"},null,8,["modelValue","disabled"])])),_:1})])),_:1},16),n(x,g(_(le.value)),{default:s((()=>[n(y,{label:"邮箱：",prop:"email"},{default:s((()=>[n(d,{modelValue:$.email,"onUpdate:modelValue":a[20]||(a[20]=e=>$.email=e),disabled:"新增商户"!==e.title,placeholder:"请输入邮箱"},null,8,["modelValue","disabled"])])),_:1})])),_:1},16),"新增商户"===e.title?(o(),f(x,g(v({key:0},le.value)),{default:s((()=>[n(y,{label:"登录密码：",prop:"login_password"},{default:s((()=>[n(d,{modelValue:$.login_password,"onUpdate:modelValue":a[21]||(a[21]=e=>$.login_password=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},16)):h("",!0),n(x,g(_(le.value)),{default:s((()=>[n(y,{label:"用户端账号：",prop:"user_id"},{default:s((()=>[n(F,{modelValue:$.user_id,"onUpdate:modelValue":a[22]||(a[22]=e=>$.user_id=e),disabled:"新增商户"!==e.title,filterable:"",remote:"","reserve-keyword":"",placeholder:"输入手机号查询","remote-method":me,loading:se.value},{default:s((()=>[(o(!0),i(c,null,b(ie.value,(e=>(o(),f(B,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled","loading"])])),_:1})])),_:1},16)])),_:1}),n(y,null,{default:s((()=>[n(G,{onClick:X},{default:s((()=>a[24]||(a[24]=[V("取消")]))),_:1}),n(G,{type:"primary",onClick:Z},{default:s((()=>a[25]||(a[25]=[V("保存")]))),_:1})])),_:1})])),_:1},8,["rules","model"])])),_:1})])}}}),[["__scopeId","data-v-a0945ef8"]]);export{B as default};
